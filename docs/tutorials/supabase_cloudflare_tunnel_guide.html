<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/supabase_cloudflare_tunnel_guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Cấu hình Cloudflare Tunnel cho Supabase Self-hosted | Lê Việt Hưng</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://viethungle0503.github.io/viethungle/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://viethungle0503.github.io/viethungle/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://viethungle0503.github.io/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cấu hình Cloudflare Tunnel cho Supabase Self-hosted | Lê Việt Hưng"><meta data-rh="true" name="description" content="1. Tổng quan"><meta data-rh="true" property="og:description" content="1. Tổng quan"><link data-rh="true" rel="icon" href="/viethungle/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://viethungle0503.github.io/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide"><link data-rh="true" rel="alternate" href="https://viethungle0503.github.io/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://viethungle0503.github.io/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Cấu hình Cloudflare Tunnel cho Supabase Self-hosted","item":"https://viethungle0503.github.io/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide"}]}</script><link rel="alternate" type="application/rss+xml" href="/viethungle/blog/rss.xml" title="Lê Việt Hưng RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/viethungle/blog/atom.xml" title="Lê Việt Hưng Atom Feed"><link rel="stylesheet" href="/viethungle/assets/css/styles.2eab34b2.css">
<script src="/viethungle/assets/js/runtime~main.4a97cded.js" defer="defer"></script>
<script src="/viethungle/assets/js/main.8dbc73f9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/viethungle/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/viethungle/"><div class="navbar__logo"><img src="/viethungle/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/viethungle/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/viethungle/docs/git-tips">Tutorial</a><a class="navbar__item navbar__link" href="/viethungle/docs/gaming/ark-cheats">Gaming</a><a class="navbar__item navbar__link" href="/viethungle/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/viethungle/docs/git-tips">Git Tips and Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/viethungle/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/viethungle/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Expand sidebar category &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/viethungle/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Expand sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/viethungle/docs/category/aws---console">AWS - Console</a><button aria-label="Expand sidebar category &#x27;AWS - Console&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/viethungle/docs/gaming/ark-cheats">gaming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/viethungle/docs/tutorials/sparse-checkout">tutorials</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/sparse-checkout">Sparse Checkout in Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/cleanup-git-branches">Cleaning Up Git Branches</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/nginx-proxy-manager-symlink-fix">Khắc Phục Symlink Nginx Proxy Manager Sau Backup Thủ Công</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/nginx-proxy-manager-symlink-fix-en">Fixing Nginx Proxy Manager Symlinks After Manual Backup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/thunderbird-sent-thread-integration">Thunderbird - Hiển Thị Email Sent Trong Cùng Thread</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/windows-gpg-git-setup">Thiết Lập GPG Signing Cho Git Trên Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/gpu-benchmarks">Các trang web chuyên so sánh hiệu năng GPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/webrtc-p2p-sfu-opensource-projects">Các dự án mã nguồn mở cho P2P và SFU WebRTC Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/network-monitoring-mtr-iperf3-tailscale">MTR, iperf3 và Tailscale - Công cụ đo mạng chuyên nghiệp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/streaming-servers-comparison-srs-mediamtx-zlmediakit">So sánh các Streaming Server: SRS vs MediaMTX vs ZLMediaKit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/recover-docker-run-command">Cách xem lại lệnh docker run từ container đang chạy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/open-source-databases-comparison">Các Database Open-Source Phổ Biến: So sánh tính năng và use case</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/gpg4win-backup-restore-private-key">Backup và Restore Private Key GPG trên Windows với GPG4win</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/git-structure-and-commit-removal">Cấu trúc thư mục Git và cách loại bỏ commit không mong muốn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/python_version_management">Quản lý phiên bản Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/java_version_management">Quản lý phiên bản Java và JVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide">Cấu hình Cloudflare Tunnel cho Supabase Self-hosted</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/viettelidc-chi-thay-20gb">Ubuntu chỉ thấy 20 GB (fix)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/background-script-management">Quản lý script background</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/s3express_digitalocean_guide">Sử dụng S3Express để upload image lên DigitalOcean Spaces</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/viethungle/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">tutorials</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Cấu hình Cloudflare Tunnel cho Supabase Self-hosted</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cấu hình Cloudflare Tunnel cho Supabase Self-hosted</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-tổng-quan">1. Tổng quan<a href="#1-tổng-quan" class="hash-link" aria-label="Direct link to 1. Tổng quan" title="Direct link to 1. Tổng quan">​</a></h2>
<p>Khi self-host Supabase, việc cấu hình HTTPS với domain tùy chỉnh thường gặp khó khăn do cần thiết lập SSL certificate và reverse proxy. Cloudflare Tunnel cung cấp một giải pháp đơn giản, cho phép truy cập Supabase qua HTTPS mà không cần cấu hình phức tạp.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-lợi-ích-của-cloudflare-tunnel">1.1. Lợi ích của Cloudflare Tunnel<a href="#11-lợi-ích-của-cloudflare-tunnel" class="hash-link" aria-label="Direct link to 1.1. Lợi ích của Cloudflare Tunnel" title="Direct link to 1.1. Lợi ích của Cloudflare Tunnel">​</a></h3>
<ul>
<li><strong>Tự động có HTTPS</strong> qua Cloudflare</li>
<li><strong>Không cần quản lý SSL certificate</strong> thủ công</li>
<li><strong>Bảo mật cao</strong> với khả năng giới hạn truy cập</li>
<li><strong>Dễ dàng setup và maintain</strong></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-kiến-trúc-hệ-thống">1.2. Kiến trúc hệ thống<a href="#12-kiến-trúc-hệ-thống" class="hash-link" aria-label="Direct link to 1.2. Kiến trúc hệ thống" title="Direct link to 1.2. Kiến trúc hệ thống">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User → Cloudflare → Tunnel → Docker Network → Supabase Services</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-yêu-cầu-trước-khi-bắt-đầu">2. Yêu cầu trước khi bắt đầu<a href="#2-yêu-cầu-trước-khi-bắt-đầu" class="hash-link" aria-label="Direct link to 2. Yêu cầu trước khi bắt đầu" title="Direct link to 2. Yêu cầu trước khi bắt đầu">​</a></h2>
<ul>
<li>Supabase đã được cài đặt và chạy bằng Docker</li>
<li>Domain đã được thêm vào Cloudflare</li>
<li>Truy cập vào Cloudflare Zero Trust Dashboard</li>
<li>Docker và Docker Compose đã cài đặt</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-tạo-cloudflare-tunnel">3. Tạo Cloudflare Tunnel<a href="#3-tạo-cloudflare-tunnel" class="hash-link" aria-label="Direct link to 3. Tạo Cloudflare Tunnel" title="Direct link to 3. Tạo Cloudflare Tunnel">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-truy-cập-zero-trust-dashboard">3.1. Truy cập Zero Trust Dashboard<a href="#31-truy-cập-zero-trust-dashboard" class="hash-link" aria-label="Direct link to 3.1. Truy cập Zero Trust Dashboard" title="Direct link to 3.1. Truy cập Zero Trust Dashboard">​</a></h3>
<ol>
<li>Đăng nhập vào Cloudflare Dashboard</li>
<li>Chuyển đến <strong>Zero Trust</strong> → <strong>Networks</strong> → <strong>Tunnels</strong></li>
<li>Click <strong>&quot;Create a tunnel&quot;</strong></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-cấu-hình-tunnel">3.2. Cấu hình Tunnel<a href="#32-cấu-hình-tunnel" class="hash-link" aria-label="Direct link to 3.2. Cấu hình Tunnel" title="Direct link to 3.2. Cấu hình Tunnel">​</a></h3>
<ol>
<li>Chọn <strong>&quot;Cloudflared&quot;</strong> → Next</li>
<li>Đặt tên tunnel (ví dụ: <code>supabase-tunnel</code>)</li>
<li>Click <strong>&quot;Save tunnel&quot;</strong></li>
<li>Trong tab <strong>&quot;Install and run a connector&quot;</strong>, chọn <strong>Docker</strong></li>
<li><strong>Copy token</strong> từ lệnh Docker được generate (phần sau <code>--token</code>)</li>
</ol>
<p><strong>Lưu ý:</strong> Token này sẽ được sử dụng trong bước tiếp theo.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-thêm-cloudflared-vào-docker-compose">4. Thêm Cloudflared vào Docker Compose<a href="#4-thêm-cloudflared-vào-docker-compose" class="hash-link" aria-label="Direct link to 4. Thêm Cloudflared vào Docker Compose" title="Direct link to 4. Thêm Cloudflared vào Docker Compose">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-chỉnh-sửa-docker-composeyml">4.1. Chỉnh sửa docker-compose.yml<a href="#41-chỉnh-sửa-docker-composeyml" class="hash-link" aria-label="Direct link to 4.1. Chỉnh sửa docker-compose.yml" title="Direct link to 4.1. Chỉnh sửa docker-compose.yml">​</a></h3>
<p>Thêm service cloudflared vào file <code>docker-compose.yml</code> của Supabase:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... các services khác của Supabase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cloudflared</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cloudflared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cloudflare/cloudflared</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tunnel </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">no</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">autoupdate run </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token YOUR_TUNNEL_TOKEN_HERE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default</span><br></span></code></pre></div></div>
<p><strong>Thay <code>YOUR_TUNNEL_TOKEN_HERE</code></strong> bằng token đã copy từ bước 3.2.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-khởi-động-lại-containers">4.2. Khởi động lại containers<a href="#42-khởi-động-lại-containers" class="hash-link" aria-label="Direct link to 4.2. Khởi động lại containers" title="Direct link to 4.2. Khởi động lại containers">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd supabase-project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker compose down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker compose up -d</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-cấu-hình-public-hostnames">5. Cấu hình Public Hostnames<a href="#5-cấu-hình-public-hostnames" class="hash-link" aria-label="Direct link to 5. Cấu hình Public Hostnames" title="Direct link to 5. Cấu hình Public Hostnames">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-truy-cập-tab-public-hostnames">5.1. Truy cập tab Public Hostnames<a href="#51-truy-cập-tab-public-hostnames" class="hash-link" aria-label="Direct link to 5.1. Truy cập tab Public Hostnames" title="Direct link to 5.1. Truy cập tab Public Hostnames">​</a></h3>
<p>Quay lại Cloudflare Zero Trust Dashboard, vào tunnel vừa tạo và chuyển đến tab <strong>&quot;Public Hostnames&quot;</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-thêm-hostname-cho-supabase-studio">5.2. Thêm hostname cho Supabase Studio<a href="#52-thêm-hostname-cho-supabase-studio" class="hash-link" aria-label="Direct link to 5.2. Thêm hostname cho Supabase Studio" title="Direct link to 5.2. Thêm hostname cho Supabase Studio">​</a></h3>
<ol>
<li>Click <strong>&quot;Add a public hostname&quot;</strong></li>
<li><strong>Subdomain:</strong> <code>supabase</code></li>
<li><strong>Domain:</strong> <code>rtrobotics.tech</code> (thay bằng domain của bạn)</li>
<li><strong>Service Type:</strong> <code>HTTP</code></li>
<li><strong>URL:</strong> <code>studio:3000</code></li>
<li>Click <strong>&quot;Save hostname&quot;</strong></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-thêm-hostname-cho-supabase-api">5.3. Thêm hostname cho Supabase API<a href="#53-thêm-hostname-cho-supabase-api" class="hash-link" aria-label="Direct link to 5.3. Thêm hostname cho Supabase API" title="Direct link to 5.3. Thêm hostname cho Supabase API">​</a></h3>
<ol>
<li>Click <strong>&quot;Add a public hostname&quot;</strong></li>
<li><strong>Subdomain:</strong> <code>api</code></li>
<li><strong>Domain:</strong> <code>rtrobotics.tech</code> (thay bằng domain của bạn)</li>
<li><strong>Service Type:</strong> <code>HTTP</code></li>
<li><strong>URL:</strong> <code>kong:8000</code></li>
<li>Click <strong>&quot;Save hostname&quot;</strong></li>
</ol>
<p>Cloudflare sẽ tự động thêm các CNAME records tương ứng trong DNS Records với định dạng như sau:</p>
<ol>
<li>
<p><strong>Record 1:</strong></p>
<ul>
<li>Type: <code>CNAME</code></li>
<li>Name: <code>supabase</code></li>
<li>Target: <code>YOUR_TUNNEL_ID.cfargotunnel.com</code></li>
<li>Proxy status: <strong>Proxied (Orange cloud)</strong></li>
</ul>
</li>
<li>
<p><strong>Record 2:</strong></p>
<ul>
<li>Type: <code>CNAME</code></li>
<li>Name: <code>api</code></li>
<li>Target: <code>YOUR_TUNNEL_ID.cfargotunnel.com</code></li>
<li>Proxy status: <strong>Proxied (Orange cloud)</strong></li>
</ul>
</li>
</ol>
<p><strong>Lưu ý:</strong></p>
<ul>
<li><code>YOUR_TUNNEL_ID</code> có thể tìm thấy trong URL tunnel hoặc trong dashboard.</li>
<li>Sử dụng tên service Docker (<code>studio</code>, <code>kong</code>) thay vì <code>localhost</code> để đảm bảo connectivity trong Docker network.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-cập-nhật-cấu-hình-supabase">7. Cập nhật cấu hình Supabase<a href="#7-cập-nhật-cấu-hình-supabase" class="hash-link" aria-label="Direct link to 7. Cập nhật cấu hình Supabase" title="Direct link to 7. Cập nhật cấu hình Supabase">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-chỉnh-sửa-file-env">7.1. Chỉnh sửa file .env<a href="#71-chỉnh-sửa-file-env" class="hash-link" aria-label="Direct link to 7.1. Chỉnh sửa file .env" title="Direct link to 7.1. Chỉnh sửa file .env">​</a></h3>
<p>Cập nhật các biến môi trường trong file <code>.env</code> của Supabase:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># URL cho API endpoints (Kong gateway)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">API_EXTERNAL_URL=https://api.rtrobotics.tech</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># URL cho Supabase Studio dashboard  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUPABASE_PUBLIC_URL=https://supabase.rtrobotics.tech</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Base URL của site (dùng cho auth redirects)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SITE_URL=https://supabase.rtrobotics.tech</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URI_ALLOW_LIST=https://supabase.rtrobotics.tech</span><br></span></code></pre></div></div>
<p>Xem thêm docs của Supabase dành cho từng front-end framwork:</p>
<ul>
<li><a href="https://supabase.com/docs/guides/auth/server-side" target="_blank" rel="noopener noreferrer">https://supabase.com/docs/guides/auth/server-side</a></li>
<li><a href="https://github.com/supabase/auth" target="_blank" rel="noopener noreferrer">https://github.com/supabase/auth</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-ý-nghĩa-các-biến-môi-trường">7.2. Ý nghĩa các biến môi trường<a href="#72-ý-nghĩa-các-biến-môi-trường" class="hash-link" aria-label="Direct link to 7.2. Ý nghĩa các biến môi trường" title="Direct link to 7.2. Ý nghĩa các biến môi trường">​</a></h3>
<ul>
<li>
<p><strong><code>API_EXTERNAL_URL</code></strong>: URL mà GoTrue (Auth service) sử dụng để tạo links trong email xác thực và các API calls. Đây là URL mà client applications sẽ sử dụng để kết nối với Supabase API.</p>
</li>
<li>
<p><strong><code>SUPABASE_PUBLIC_URL</code></strong>: URL để truy cập Supabase Studio dashboard.</p>
</li>
<li>
<p><strong><code>SITE_URL</code></strong>: URL cơ sở của website/application, được sử dụng làm allow-list cho redirects và để tạo URLs trong emails.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-khởi-động-lại-services">7.3. Khởi động lại services<a href="#73-khởi-động-lại-services" class="hash-link" aria-label="Direct link to 7.3. Khởi động lại services" title="Direct link to 7.3. Khởi động lại services">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker compose up -d</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-kiểm-tra-kết-nối">8. Kiểm tra kết nối<a href="#8-kiểm-tra-kết-nối" class="hash-link" aria-label="Direct link to 8. Kiểm tra kết nối" title="Direct link to 8. Kiểm tra kết nối">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="81-test-các-endpoints">8.1. Test các endpoints<a href="#81-test-các-endpoints" class="hash-link" aria-label="Direct link to 8.1. Test các endpoints" title="Direct link to 8.1. Test các endpoints">​</a></h3>
<ul>
<li><strong>Supabase Studio:</strong> <code>https://supabase.rtrobotics.tech</code></li>
<li><strong>API Health Check:</strong> <code>https://api.rtrobotics.tech/rest/v1/</code></li>
<li><strong>Auth endpoint:</strong> <code>https://api.rtrobotics.tech/auth/v1/</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="82-troubleshooting-thường-gặp">8.2. Troubleshooting thường gặp<a href="#82-troubleshooting-thường-gặp" class="hash-link" aria-label="Direct link to 8.2. Troubleshooting thường gặp" title="Direct link to 8.2. Troubleshooting thường gặp">​</a></h3>
<p><strong>Lỗi 502 Bad Gateway:</strong></p>
<ul>
<li>Kiểm tra container cloudflared có đang chạy không</li>
<li>Đảm bảo service names (<code>studio:3000</code>, <code>kong:8000</code>) đúng trong tunnel config</li>
</ul>
<p><strong>Không thể truy cập:</strong></p>
<ul>
<li>Kiểm tra DNS propagation (có thể mất 5-10 phút)</li>
<li>Xác nhận CNAME records đã được tạo và proxied</li>
</ul>
<p><strong>Auth không hoạt động:</strong></p>
<ul>
<li>Kiểm tra <code>API_EXTERNAL_URL</code> đã được cấu hình đúng trong <code>.env</code></li>
<li>Đảm bảo <code>SITE_URL</code> match với domain đang sử dụng</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-kết-luận">9. Kết luận<a href="#9-kết-luận" class="hash-link" aria-label="Direct link to 9. Kết luận" title="Direct link to 9. Kết luận">​</a></h2>
<p>Cloudflare Tunnel cung cấp một giải pháp elegant để expose Supabase self-hosted ra internet với HTTPS. Phương pháp này đặc biệt phù hợp cho:</p>
<ul>
<li><strong>Development environments</strong> cần truy cập từ xa</li>
<li><strong>Small to medium production deployments</strong></li>
<li><strong>Prototyping</strong> và testing</li>
<li>Các trường hợp cần <strong>setup nhanh</strong> mà không muốn quản lý infrastructure phức tạp</li>
</ul>
<p>Với cách tiếp cận này, bạn có thể có được một Supabase instance an toàn, có HTTPS và dễ dàng truy cập chỉ trong vài phút setup.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/supabase_cloudflare_tunnel_guide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/viethungle/docs/tutorials/java_version_management"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quản lý phiên bản Java và JVM</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/viethungle/docs/tutorials/viettelidc-chi-thay-20gb"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ubuntu chỉ thấy 20 GB (fix)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-tổng-quan" class="table-of-contents__link toc-highlight">1. Tổng quan</a><ul><li><a href="#11-lợi-ích-của-cloudflare-tunnel" class="table-of-contents__link toc-highlight">1.1. Lợi ích của Cloudflare Tunnel</a></li><li><a href="#12-kiến-trúc-hệ-thống" class="table-of-contents__link toc-highlight">1.2. Kiến trúc hệ thống</a></li></ul></li><li><a href="#2-yêu-cầu-trước-khi-bắt-đầu" class="table-of-contents__link toc-highlight">2. Yêu cầu trước khi bắt đầu</a></li><li><a href="#3-tạo-cloudflare-tunnel" class="table-of-contents__link toc-highlight">3. Tạo Cloudflare Tunnel</a><ul><li><a href="#31-truy-cập-zero-trust-dashboard" class="table-of-contents__link toc-highlight">3.1. Truy cập Zero Trust Dashboard</a></li><li><a href="#32-cấu-hình-tunnel" class="table-of-contents__link toc-highlight">3.2. Cấu hình Tunnel</a></li></ul></li><li><a href="#4-thêm-cloudflared-vào-docker-compose" class="table-of-contents__link toc-highlight">4. Thêm Cloudflared vào Docker Compose</a><ul><li><a href="#41-chỉnh-sửa-docker-composeyml" class="table-of-contents__link toc-highlight">4.1. Chỉnh sửa docker-compose.yml</a></li><li><a href="#42-khởi-động-lại-containers" class="table-of-contents__link toc-highlight">4.2. Khởi động lại containers</a></li></ul></li><li><a href="#5-cấu-hình-public-hostnames" class="table-of-contents__link toc-highlight">5. Cấu hình Public Hostnames</a><ul><li><a href="#51-truy-cập-tab-public-hostnames" class="table-of-contents__link toc-highlight">5.1. Truy cập tab Public Hostnames</a></li><li><a href="#52-thêm-hostname-cho-supabase-studio" class="table-of-contents__link toc-highlight">5.2. Thêm hostname cho Supabase Studio</a></li><li><a href="#53-thêm-hostname-cho-supabase-api" class="table-of-contents__link toc-highlight">5.3. Thêm hostname cho Supabase API</a></li></ul></li><li><a href="#7-cập-nhật-cấu-hình-supabase" class="table-of-contents__link toc-highlight">7. Cập nhật cấu hình Supabase</a><ul><li><a href="#71-chỉnh-sửa-file-env" class="table-of-contents__link toc-highlight">7.1. Chỉnh sửa file .env</a></li><li><a href="#72-ý-nghĩa-các-biến-môi-trường" class="table-of-contents__link toc-highlight">7.2. Ý nghĩa các biến môi trường</a></li><li><a href="#73-khởi-động-lại-services" class="table-of-contents__link toc-highlight">7.3. Khởi động lại services</a></li></ul></li><li><a href="#8-kiểm-tra-kết-nối" class="table-of-contents__link toc-highlight">8. Kiểm tra kết nối</a><ul><li><a href="#81-test-các-endpoints" class="table-of-contents__link toc-highlight">8.1. Test các endpoints</a></li><li><a href="#82-troubleshooting-thường-gặp" class="table-of-contents__link toc-highlight">8.2. Troubleshooting thường gặp</a></li></ul></li><li><a href="#9-kết-luận" class="table-of-contents__link toc-highlight">9. Kết luận</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/viethungle/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/viethung.le.35110418" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/viethungle0503/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/viethungle/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/viethungle0503/viethungle" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Lê Việt Hưng, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>