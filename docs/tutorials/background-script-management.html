<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/background-script-management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">19. Chạy script dưới nền: Quản lý background processes và logs | Lê Việt Hưng</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://viethungle0503.github.io/viethungle/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://viethungle0503.github.io/viethungle/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://viethungle0503.github.io/viethungle/docs/tutorials/background-script-management"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="19. Chạy script dưới nền: Quản lý background processes và logs | Lê Việt Hưng"><meta data-rh="true" name="description" content="Hướng dẫn chi tiết cách chạy script dưới nền, quản lý logs, tìm và tắt processes. Bao gồm nohup, screen, tmux và MobaXterm quick commands."><meta data-rh="true" property="og:description" content="Hướng dẫn chi tiết cách chạy script dưới nền, quản lý logs, tìm và tắt processes. Bao gồm nohup, screen, tmux và MobaXterm quick commands."><link data-rh="true" rel="icon" href="/viethungle/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://viethungle0503.github.io/viethungle/docs/tutorials/background-script-management"><link data-rh="true" rel="alternate" href="https://viethungle0503.github.io/viethungle/docs/tutorials/background-script-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://viethungle0503.github.io/viethungle/docs/tutorials/background-script-management" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Quản lý script background","item":"https://viethungle0503.github.io/viethungle/docs/tutorials/background-script-management"}]}</script><link rel="alternate" type="application/rss+xml" href="/viethungle/blog/rss.xml" title="Lê Việt Hưng RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/viethungle/blog/atom.xml" title="Lê Việt Hưng Atom Feed"><link rel="stylesheet" href="/viethungle/assets/css/styles.2eab34b2.css">
<script src="/viethungle/assets/js/runtime~main.4a97cded.js" defer="defer"></script>
<script src="/viethungle/assets/js/main.8dbc73f9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/viethungle/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/viethungle/"><div class="navbar__logo"><img src="/viethungle/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/viethungle/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/viethungle/docs/git-tips">Tutorial</a><a class="navbar__item navbar__link" href="/viethungle/docs/gaming/ark-cheats">Gaming</a><a class="navbar__item navbar__link" href="/viethungle/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/viethungle/docs/git-tips">Git Tips and Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/viethungle/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/viethungle/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Expand sidebar category &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/viethungle/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Expand sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/viethungle/docs/category/aws---console">AWS - Console</a><button aria-label="Expand sidebar category &#x27;AWS - Console&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/viethungle/docs/gaming/ark-cheats">gaming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/viethungle/docs/tutorials/sparse-checkout">tutorials</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/sparse-checkout">Sparse Checkout in Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/cleanup-git-branches">Cleaning Up Git Branches</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/nginx-proxy-manager-symlink-fix">Khắc Phục Symlink Nginx Proxy Manager Sau Backup Thủ Công</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/nginx-proxy-manager-symlink-fix-en">Fixing Nginx Proxy Manager Symlinks After Manual Backup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/thunderbird-sent-thread-integration">Thunderbird - Hiển Thị Email Sent Trong Cùng Thread</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/windows-gpg-git-setup">Thiết Lập GPG Signing Cho Git Trên Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/gpu-benchmarks">Các trang web chuyên so sánh hiệu năng GPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/webrtc-p2p-sfu-opensource-projects">Các dự án mã nguồn mở cho P2P và SFU WebRTC Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/network-monitoring-mtr-iperf3-tailscale">MTR, iperf3 và Tailscale - Công cụ đo mạng chuyên nghiệp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/streaming-servers-comparison-srs-mediamtx-zlmediakit">So sánh các Streaming Server: SRS vs MediaMTX vs ZLMediaKit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/recover-docker-run-command">Cách xem lại lệnh docker run từ container đang chạy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/open-source-databases-comparison">Các Database Open-Source Phổ Biến: So sánh tính năng và use case</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/gpg4win-backup-restore-private-key">Backup và Restore Private Key GPG trên Windows với GPG4win</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/git-structure-and-commit-removal">Cấu trúc thư mục Git và cách loại bỏ commit không mong muốn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/python_version_management">Quản lý phiên bản Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/java_version_management">Quản lý phiên bản Java và JVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide">Cấu hình Cloudflare Tunnel cho Supabase Self-hosted</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/viettelidc-chi-thay-20gb">Ubuntu chỉ thấy 20 GB (fix)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/viethungle/docs/tutorials/background-script-management">Quản lý script background</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/viethungle/docs/tutorials/s3express_digitalocean_guide">Sử dụng S3Express để upload image lên DigitalOcean Spaces</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/viethungle/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">tutorials</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Quản lý script background</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>19. Chạy script dưới nền: Quản lý background processes và logs</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tóm-tắt">Tóm tắt<a href="#tóm-tắt" class="hash-link" aria-label="Direct link to Tóm tắt" title="Direct link to Tóm tắt">​</a></h2>
<p>Bài viết này hướng dẫn các cách chạy script dưới background (nền), quản lý logs của script, cách tìm và tắt script đang chạy. Đặc biệt hữu ích khi cần chạy script liên tục trên server mà không bị gián đoạn khi ngắt kết nối SSH.</p>
<p><strong>Các phương pháp được đề cập:</strong></p>
<ul>
<li>Background process với <code>&amp;</code> và <code>nohup</code></li>
<li>Quản lý session với <code>screen</code> và <code>tmux</code></li>
<li>Theo dõi logs real-time</li>
<li>Tìm và kill processes</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-các-cách-chạy-script-dưới-background">1. Các cách chạy script dưới background<a href="#1-các-cách-chạy-script-dưới-background" class="hash-link" aria-label="Direct link to 1. Các cách chạy script dưới background" title="Direct link to 1. Các cách chạy script dưới background">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-1-background-đơn-giản">Cách 1: Background đơn giản<a href="#cách-1-background-đơn-giản" class="hash-link" aria-label="Direct link to Cách 1: Background đơn giản" title="Direct link to Cách 1: Background đơn giản">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./kick_orphan_players.sh &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></span></code></pre></div></div>
<p><strong>Đặc điểm:</strong></p>
<ul>
<li>Chạy background với <code>&amp;</code></li>
<li>Bỏ qua output (<code>&gt; /dev/null 2&gt;&amp;1</code>)</li>
<li><strong>Hạn chế</strong>: Script sẽ dừng khi logout SSH</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-2-sử-dụng-nohup-khuyến-nghị">Cách 2: Sử dụng nohup (khuyến nghị)<a href="#cách-2-sử-dụng-nohup-khuyến-nghị" class="hash-link" aria-label="Direct link to Cách 2: Sử dụng nohup (khuyến nghị)" title="Direct link to Cách 2: Sử dụng nohup (khuyến nghị)">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./kick_orphan_players.sh &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></span></code></pre></div></div>
<p><strong>Ưu điểm:</strong></p>
<ul>
<li><code>nohup</code>: Script tiếp tục chạy ngay cả khi logout SSH</li>
<li><code>&gt; /dev/null</code>: Không lưu output</li>
<li><code>2&gt;&amp;1</code>: Chuyển stderr thành stdout (cũng vào /dev/null)</li>
<li><code>&amp;</code>: Chạy background</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-3-lưu-pid-để-quản-lý-dễ-dàng">Cách 3: Lưu PID để quản lý dễ dàng<a href="#cách-3-lưu-pid-để-quản-lý-dễ-dàng" class="hash-link" aria-label="Direct link to Cách 3: Lưu PID để quản lý dễ dàng" title="Direct link to Cách 3: Lưu PID để quản lý dễ dàng">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./kick_orphan_players.sh &gt; /dev/null 2&gt;&amp;1 &amp; echo $! &gt; kick_script.pid</span><br></span></code></pre></div></div>
<p><strong>Lợi ích:</strong></p>
<ul>
<li>Lưu Process ID vào file <code>kick_script.pid</code></li>
<li>Dễ dàng kill process sau này</li>
<li>Kiểm tra script có đang chạy không</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-4-chạy-với-log-file">Cách 4: Chạy với log file<a href="#cách-4-chạy-với-log-file" class="hash-link" aria-label="Direct link to Cách 4: Chạy với log file" title="Direct link to Cách 4: Chạy với log file">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./kick_orphan_players.sh &gt; kick_orphan.log 2&gt;&amp;1 &amp;</span><br></span></code></pre></div></div>
<p><strong>Ưu điểm:</strong></p>
<ul>
<li>Lưu toàn bộ output vào file log</li>
<li>Có thể debug khi cần</li>
<li>Theo dõi hoạt động của script</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-5-sử-dụng-screen">Cách 5: Sử dụng screen<a href="#cách-5-sử-dụng-screen" class="hash-link" aria-label="Direct link to Cách 5: Sử dụng screen" title="Direct link to Cách 5: Sử dụng screen">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tạo screen session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -dmS kick_orphan ./kick_orphan_players.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Hoặc tạo session rồi chạy script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -S kick_orphan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./kick_orphan_players.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Nhấn Ctrl+A, sau đó D để detach</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-6-sử-dụng-tmux">Cách 6: Sử dụng tmux<a href="#cách-6-sử-dụng-tmux" class="hash-link" aria-label="Direct link to Cách 6: Sử dụng tmux" title="Direct link to Cách 6: Sử dụng tmux">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tạo tmux session và chạy script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux new-session -d -s kick_orphan &#x27;./kick_orphan_players.sh&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Hoặc tạo session thủ công</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux new-session -s kick_orphan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./kick_orphan_players.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Nhấn Ctrl+B, sau đó D để detach</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-quản-lý-và-theo-dõi-logs">2. Quản lý và theo dõi logs<a href="#2-quản-lý-và-theo-dõi-logs" class="hash-link" aria-label="Direct link to 2. Quản lý và theo dõi logs" title="Direct link to 2. Quản lý và theo dõi logs">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chạy-script-với-log-file">Chạy script với log file<a href="#chạy-script-với-log-file" class="hash-link" aria-label="Direct link to Chạy script với log file" title="Direct link to Chạy script với log file">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./kick_orphan_players.sh &gt; kick_orphan.log 2&gt;&amp;1 &amp;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xem-logs-theo-nhiều-cách">Xem logs theo nhiều cách<a href="#xem-logs-theo-nhiều-cách" class="hash-link" aria-label="Direct link to Xem logs theo nhiều cách" title="Direct link to Xem logs theo nhiều cách">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="xem-toàn-bộ-log">Xem toàn bộ log<a href="#xem-toàn-bộ-log" class="hash-link" aria-label="Direct link to Xem toàn bộ log" title="Direct link to Xem toàn bộ log">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat kick_orphan.log</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="xem-log-real-time-khuyến-nghị">Xem log real-time (khuyến nghị)<a href="#xem-log-real-time-khuyến-nghị" class="hash-link" aria-label="Direct link to Xem log real-time (khuyến nghị)" title="Direct link to Xem log real-time (khuyến nghị)">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tail -f kick_orphan.log</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="xem-n-dòng-cuối-cùng">Xem n dòng cuối cùng<a href="#xem-n-dòng-cuối-cùng" class="hash-link" aria-label="Direct link to Xem n dòng cuối cùng" title="Direct link to Xem n dòng cuối cùng">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Xem 20 dòng cuối</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tail -20 kick_orphan.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Xem 50 dòng cuối</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tail -50 kick_orphan.log</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="xem-log-với-timestamps">Xem log với timestamps<a href="#xem-log-với-timestamps" class="hash-link" aria-label="Direct link to Xem log với timestamps" title="Direct link to Xem log với timestamps">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Thêm timestamp vào script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;$(date): Script started&quot; &gt;&gt; kick_orphan.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./kick_orphan_players.sh &gt;&gt; kick_orphan.log 2&gt;&amp;1</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sử-dụng-tee-để-vừa-xem-vừa-lưu">Sử dụng tee để vừa xem vừa lưu<a href="#sử-dụng-tee-để-vừa-xem-vừa-lưu" class="hash-link" aria-label="Direct link to Sử dụng tee để vừa xem vừa lưu" title="Direct link to Sử dụng tee để vừa xem vừa lưu">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./kick_orphan_players.sh 2&gt;&amp;1 | tee kick_orphan.log &amp;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rotate-logs-tránh-file-quá-lớn">Rotate logs (tránh file quá lớn)<a href="#rotate-logs-tránh-file-quá-lớn" class="hash-link" aria-label="Direct link to Rotate logs (tránh file quá lớn)" title="Direct link to Rotate logs (tránh file quá lớn)">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Backup log cũ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv kick_orphan.log kick_orphan.log.$(date +%Y%m%d_%H%M%S)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Hoặc sử dụng logrotate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/logrotate.d/kick_orphan</span><br></span></code></pre></div></div>
<p>Nội dung file logrotate:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/path/to/kick_orphan.log {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    daily</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rotate 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    missingok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    notifempty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-tìm-và-quản-lý-background-processes">3. Tìm và quản lý background processes<a href="#3-tìm-và-quản-lý-background-processes" class="hash-link" aria-label="Direct link to 3. Tìm và quản lý background processes" title="Direct link to 3. Tìm và quản lý background processes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kiểm-tra-process-đang-chạy">Kiểm tra process đang chạy<a href="#kiểm-tra-process-đang-chạy" class="hash-link" aria-label="Direct link to Kiểm tra process đang chạy" title="Direct link to Kiểm tra process đang chạy">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tìm-theo-tên-script">Tìm theo tên script<a href="#tìm-theo-tên-script" class="hash-link" aria-label="Direct link to Tìm theo tên script" title="Direct link to Tìm theo tên script">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps aux | grep kick_orphan_players</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tìm-theo-tên-process-chi-tiết-hơn">Tìm theo tên process chi tiết hơn<a href="#tìm-theo-tên-process-chi-tiết-hơn" class="hash-link" aria-label="Direct link to Tìm theo tên process chi tiết hơn" title="Direct link to Tìm theo tên process chi tiết hơn">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps aux | grep -v grep | grep kick_orphan</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sử-dụng-pgrep-gọn-hơn">Sử dụng pgrep (gọn hơn)<a href="#sử-dụng-pgrep-gọn-hơn" class="hash-link" aria-label="Direct link to Sử dụng pgrep (gọn hơn)" title="Direct link to Sử dụng pgrep (gọn hơn)">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pgrep -f kick_orphan_players.sh</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hiển-thị-process-tree">Hiển thị process tree<a href="#hiển-thị-process-tree" class="hash-link" aria-label="Direct link to Hiển thị process tree" title="Direct link to Hiển thị process tree">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pstree -p | grep kick_orphan</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kill-processes">Kill processes<a href="#kill-processes" class="hash-link" aria-label="Direct link to Kill processes" title="Direct link to Kill processes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kill-bằng-pid-file-nếu-đã-lưu">Kill bằng PID file (nếu đã lưu)<a href="#kill-bằng-pid-file-nếu-đã-lưu" class="hash-link" aria-label="Direct link to Kill bằng PID file (nếu đã lưu)" title="Direct link to Kill bằng PID file (nếu đã lưu)">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kill $(cat kick_script.pid)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kill-bằng-tên-process">Kill bằng tên process<a href="#kill-bằng-tên-process" class="hash-link" aria-label="Direct link to Kill bằng tên process" title="Direct link to Kill bằng tên process">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pkill -f kick_orphan_players.sh</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="force-kill-nếu-cần">Force kill nếu cần<a href="#force-kill-nếu-cần" class="hash-link" aria-label="Direct link to Force kill nếu cần" title="Direct link to Force kill nếu cần">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pkill -9 -f kick_orphan_players.sh</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kill-tất-cả-processes-liên-quan">Kill tất cả processes liên quan<a href="#kill-tất-cả-processes-liên-quan" class="hash-link" aria-label="Direct link to Kill tất cả processes liên quan" title="Direct link to Kill tất cả processes liên quan">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">killall kick_orphan_players.sh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kiểm-tra-process-có-chạy-không">Kiểm tra process có chạy không<a href="#kiểm-tra-process-có-chạy-không" class="hash-link" aria-label="Direct link to Kiểm tra process có chạy không" title="Direct link to Kiểm tra process có chạy không">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Kiểm tra bằng PID file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f kick_script.pid ] &amp;&amp; kill -0 $(cat kick_script.pid) 2&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Script đang chạy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Script không chạy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-quản-lý-session-với-screen-và-tmux">4. Quản lý session với screen và tmux<a href="#4-quản-lý-session-với-screen-và-tmux" class="hash-link" aria-label="Direct link to 4. Quản lý session với screen và tmux" title="Direct link to 4. Quản lý session với screen và tmux">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="screen-commands">Screen commands<a href="#screen-commands" class="hash-link" aria-label="Direct link to Screen commands" title="Direct link to Screen commands">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tạo-và-quản-lý-session">Tạo và quản lý session<a href="#tạo-và-quản-lý-session" class="hash-link" aria-label="Direct link to Tạo và quản lý session" title="Direct link to Tạo và quản lý session">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tạo session mới</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -S kick_orphan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># List tất cả sessions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Attach vào session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -r kick_orphan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Detach khỏi session: Ctrl+A + D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Kill session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -X -S kick_orphan quit</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="screen-trong-chế-độ-daemon">Screen trong chế độ daemon<a href="#screen-trong-chế-độ-daemon" class="hash-link" aria-label="Direct link to Screen trong chế độ daemon" title="Direct link to Screen trong chế độ daemon">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Chạy script ngay trong background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -dmS kick_orphan ./kick_orphan_players.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Attach để xem output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">screen -r kick_orphan</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tmux-commands">Tmux commands<a href="#tmux-commands" class="hash-link" aria-label="Direct link to Tmux commands" title="Direct link to Tmux commands">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tạo-và-quản-lý-session-1">Tạo và quản lý session<a href="#tạo-và-quản-lý-session-1" class="hash-link" aria-label="Direct link to Tạo và quản lý session" title="Direct link to Tạo và quản lý session">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tạo session mới</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux new-session -s kick_orphan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># List sessions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux list-sessions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Attach vào session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux attach-session -t kick_orphan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Detach: Ctrl+B + D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Kill session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux kill-session -t kick_orphan</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tmux-windows-và-panes">Tmux windows và panes<a href="#tmux-windows-và-panes" class="hash-link" aria-label="Direct link to Tmux windows và panes" title="Direct link to Tmux windows và panes">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tạo window mới: Ctrl+B + C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Chuyển window: Ctrl+B + 0,1,2...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Split pane ngang: Ctrl+B + &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Split pane dọc: Ctrl+B + %</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-best-practices-và-lưu-ý">5. Best practices và lưu ý<a href="#5-best-practices-và-lưu-ý" class="hash-link" aria-label="Direct link to 5. Best practices và lưu ý" title="Direct link to 5. Best practices và lưu ý">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="khuyến-nghị-sử-dụng">Khuyến nghị sử dụng<a href="#khuyến-nghị-sử-dụng" class="hash-link" aria-label="Direct link to Khuyến nghị sử dụng" title="Direct link to Khuyến nghị sử dụng">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Phương pháp tốt nhất cho production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./kick_orphan_players.sh &gt; kick_orphan.log 2&gt;&amp;1 &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Theo dõi real-time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tail -f kick_orphan.log</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="checklist-script-background">Checklist script background<a href="#checklist-script-background" class="hash-link" aria-label="Direct link to Checklist script background" title="Direct link to Checklist script background">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Sử dụng <code>nohup</code> để script không bị kill khi logout</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Redirect output để tránh session hang (<code>&gt; file.log 2&gt;&amp;1</code>)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Lưu PID để dễ quản lý (<code>echo $! &gt; script.pid</code>)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Thiết lập log rotation để tránh file quá lớn</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test script trước khi chạy production</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Monitor script định kỳ</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-thường-gặp">Troubleshooting thường gặp<a href="#troubleshooting-thường-gặp" class="hash-link" aria-label="Direct link to Troubleshooting thường gặp" title="Direct link to Troubleshooting thường gặp">​</a></h3>
<p><strong>Script bị kill khi logout SSH:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sử dụng nohup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./script.sh &amp;</span><br></span></code></pre></div></div>
<p><strong>Không thể kill script:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Force kill</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pkill -9 -f script_name.sh</span><br></span></code></pre></div></div>
<p><strong>Log file quá lớn:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Truncate log file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; kick_orphan.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Hoặc rotate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv kick_orphan.log kick_orphan.log.backup</span><br></span></code></pre></div></div>
<p><strong>Script chạy nhiều instance:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Kiểm tra trước khi start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pgrep -f script_name.sh || nohup ./script_name.sh &amp;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kết-luận">Kết luận<a href="#kết-luận" class="hash-link" aria-label="Direct link to Kết luận" title="Direct link to Kết luận">​</a></h2>
<p>Chạy script dưới background là kỹ năng quan trọng trong quản trị Linux. Tùy vào mục đích sử dụng:</p>
<ul>
<li><strong>Development/Testing</strong>: Sử dụng <code>screen</code> hoặc <code>tmux</code> để dễ debug</li>
<li><strong>Production</strong>: Sử dụng <code>nohup</code> với logging đầy đủ</li>
</ul>
<p><strong>Lệnh khuyến nghị:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./script.sh &gt; script.log 2&gt;&amp;1 &amp; echo $! &gt; script.pid</span><br></span></code></pre></div></div>
<p>Cách này đảm bảo script chạy bền vững, có logs để debug và dễ dàng quản lý process.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/background-script-management.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/viethungle/docs/tutorials/viettelidc-chi-thay-20gb"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ubuntu chỉ thấy 20 GB (fix)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/viethungle/docs/tutorials/s3express_digitalocean_guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sử dụng S3Express để upload image lên DigitalOcean Spaces</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tóm-tắt" class="table-of-contents__link toc-highlight">Tóm tắt</a></li><li><a href="#1-các-cách-chạy-script-dưới-background" class="table-of-contents__link toc-highlight">1. Các cách chạy script dưới background</a><ul><li><a href="#cách-1-background-đơn-giản" class="table-of-contents__link toc-highlight">Cách 1: Background đơn giản</a></li><li><a href="#cách-2-sử-dụng-nohup-khuyến-nghị" class="table-of-contents__link toc-highlight">Cách 2: Sử dụng nohup (khuyến nghị)</a></li><li><a href="#cách-3-lưu-pid-để-quản-lý-dễ-dàng" class="table-of-contents__link toc-highlight">Cách 3: Lưu PID để quản lý dễ dàng</a></li><li><a href="#cách-4-chạy-với-log-file" class="table-of-contents__link toc-highlight">Cách 4: Chạy với log file</a></li><li><a href="#cách-5-sử-dụng-screen" class="table-of-contents__link toc-highlight">Cách 5: Sử dụng screen</a></li><li><a href="#cách-6-sử-dụng-tmux" class="table-of-contents__link toc-highlight">Cách 6: Sử dụng tmux</a></li></ul></li><li><a href="#2-quản-lý-và-theo-dõi-logs" class="table-of-contents__link toc-highlight">2. Quản lý và theo dõi logs</a><ul><li><a href="#chạy-script-với-log-file" class="table-of-contents__link toc-highlight">Chạy script với log file</a></li><li><a href="#xem-logs-theo-nhiều-cách" class="table-of-contents__link toc-highlight">Xem logs theo nhiều cách</a></li><li><a href="#rotate-logs-tránh-file-quá-lớn" class="table-of-contents__link toc-highlight">Rotate logs (tránh file quá lớn)</a></li></ul></li><li><a href="#3-tìm-và-quản-lý-background-processes" class="table-of-contents__link toc-highlight">3. Tìm và quản lý background processes</a><ul><li><a href="#kiểm-tra-process-đang-chạy" class="table-of-contents__link toc-highlight">Kiểm tra process đang chạy</a></li><li><a href="#kill-processes" class="table-of-contents__link toc-highlight">Kill processes</a></li><li><a href="#kiểm-tra-process-có-chạy-không" class="table-of-contents__link toc-highlight">Kiểm tra process có chạy không</a></li></ul></li><li><a href="#4-quản-lý-session-với-screen-và-tmux" class="table-of-contents__link toc-highlight">4. Quản lý session với screen và tmux</a><ul><li><a href="#screen-commands" class="table-of-contents__link toc-highlight">Screen commands</a></li><li><a href="#tmux-commands" class="table-of-contents__link toc-highlight">Tmux commands</a></li></ul></li><li><a href="#5-best-practices-và-lưu-ý" class="table-of-contents__link toc-highlight">5. Best practices và lưu ý</a><ul><li><a href="#khuyến-nghị-sử-dụng" class="table-of-contents__link toc-highlight">Khuyến nghị sử dụng</a></li><li><a href="#checklist-script-background" class="table-of-contents__link toc-highlight">Checklist script background</a></li><li><a href="#troubleshooting-thường-gặp" class="table-of-contents__link toc-highlight">Troubleshooting thường gặp</a></li></ul></li><li><a href="#kết-luận" class="table-of-contents__link toc-highlight">Kết luận</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/viethungle/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/viethung.le.35110418" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/viethungle0503/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/viethungle/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/viethungle0503/viethungle" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Lê Việt Hưng, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>