"use strict";(self.webpackChunkviethungle_0503=self.webpackChunkviethungle_0503||[]).push([[1549],{644:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>s,contentTitle:()=>h,default:()=>d,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"tutorials/git-structure-and-commit-removal","title":"C\u1ea5u tr\xfac th\u01b0 m\u1ee5c Git v\xe0 c\xe1ch lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n","description":"B\xe0i vi\u1ebft n\xe0y gi\u1ea3i th\xedch c\u1ea5u tr\xfac th\u01b0 m\u1ee5c .git v\xe0 h\u01b0\u1edbng d\u1eabn c\xe1ch lo\u1ea1i b\u1ecf c\xe1c commit kh\xf4ng mong mu\u1ed1n (nh\u01b0 th\xeam node_modules) kh\u1ecfi l\u1ecbch s\u1eed Git m\xe0 kh\xf4ng l\xe0m thay \u0111\u1ed5i th\xf4ng tin author v\xe0 th\u1eddi gian commit.","source":"@site/docs/tutorials/git-structure-and-commit-removal.md","sourceDirName":"tutorials","slug":"/tutorials/git-structure-and-commit-removal","permalink":"/viethungle/docs/tutorials/git-structure-and-commit-removal","draft":false,"unlisted":false,"editUrl":"https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/git-structure-and-commit-removal.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14},"sidebar":"tutorialSidebar","previous":{"title":"Backup v\xe0 Restore Private Key GPG tr\xean Windows v\u1edbi GPG4win","permalink":"/viethungle/docs/tutorials/gpg4win-backup-restore-private-key"},"next":{"title":"Qu\u1ea3n l\xfd phi\xean b\u1ea3n Python","permalink":"/viethungle/docs/tutorials/python_version_management"}}');var r=e(4848),c=e(8453);const l={sidebar_position:14},h="C\u1ea5u tr\xfac th\u01b0 m\u1ee5c Git v\xe0 c\xe1ch lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n",s={},o=[{value:"1. C\u1ea5u tr\xfac th\u01b0 m\u1ee5c .git",id:"1-c\u1ea5u-tr\xfac-th\u01b0-m\u1ee5c-git",level:2},{value:"1.1 C\xe1c th\u01b0 m\u1ee5c c\u1ed1t l\xf5i",id:"11-c\xe1c-th\u01b0-m\u1ee5c-c\u1ed1t-l\xf5i",level:3},{value:"1.2 Gi\u1ea3i th\xedch chi ti\u1ebft objects/pack",id:"12-gi\u1ea3i-th\xedch-chi-ti\u1ebft-objectspack",level:3},{value:"2. Li\u1ec7t k\xea commit theo dung l\u01b0\u1ee3ng",id:"2-li\u1ec7t-k\xea-commit-theo-dung-l\u01b0\u1ee3ng",level:2},{value:"2.1 L\u1ec7nh c\u01a1 b\u1ea3n li\u1ec7t k\xea commit theo k\xedch th\u01b0\u1edbc",id:"21-l\u1ec7nh-c\u01a1-b\u1ea3n-li\u1ec7t-k\xea-commit-theo-k\xedch-th\u01b0\u1edbc",level:3},{value:"2.2 T\xecm c\xe1c file l\u1edbn nh\u1ea5t trong repository",id:"22-t\xecm-c\xe1c-file-l\u1edbn-nh\u1ea5t-trong-repository",level:3},{value:"2.3 Ph\xe2n t\xedch commit chi ti\u1ebft",id:"23-ph\xe2n-t\xedch-commit-chi-ti\u1ebft",level:3},{value:"3. Lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n v\u1edbi git filter-repo",id:"3-lo\u1ea1i-b\u1ecf-commit-kh\xf4ng-mong-mu\u1ed1n-v\u1edbi-git-filter-repo",level:2},{value:"3.1 C\xe0i \u0111\u1eb7t git-filter-repo",id:"31-c\xe0i-\u0111\u1eb7t-git-filter-repo",level:3},{value:"3.2 Lo\u1ea1i b\u1ecf th\u01b0 m\u1ee5c kh\u1ecfi to\xe0n b\u1ed9 l\u1ecbch s\u1eed",id:"32-lo\u1ea1i-b\u1ecf-th\u01b0-m\u1ee5c-kh\u1ecfi-to\xe0n-b\u1ed9-l\u1ecbch-s\u1eed",level:3},{value:"3.3 X\u1eed l\xfd l\u1ed7i &quot;not a fresh clone&quot;",id:"33-x\u1eed-l\xfd-l\u1ed7i-not-a-fresh-clone",level:3},{value:"4. Ph\u01b0\u01a1ng ph\xe1p thay th\u1ebf",id:"4-ph\u01b0\u01a1ng-ph\xe1p-thay-th\u1ebf",level:2},{value:"4.1 S\u1eed d\u1ee5ng BFG Repo-Cleaner",id:"41-s\u1eed-d\u1ee5ng-bfg-repo-cleaner",level:3},{value:"4.2 Git filter-branch (ph\u01b0\u01a1ng ph\xe1p c\u0169)",id:"42-git-filter-branch-ph\u01b0\u01a1ng-ph\xe1p-c\u0169",level:3},{value:"5. D\u1ecdn d\u1eb9p sau khi filter",id:"5-d\u1ecdn-d\u1eb9p-sau-khi-filter",level:2},{value:"5.1 Cleanup commands",id:"51-cleanup-commands",level:3},{value:"5.2 Ki\u1ec3m tra k\u1ebft qu\u1ea3",id:"52-ki\u1ec3m-tra-k\u1ebft-qu\u1ea3",level:3},{value:"6. Th\xf4ng tin \u0111\u01b0\u1ee3c b\u1ea3o to\xe0n",id:"6-th\xf4ng-tin-\u0111\u01b0\u1ee3c-b\u1ea3o-to\xe0n",level:2},{value:"6.1 D\u1eef li\u1ec7u kh\xf4ng thay \u0111\u1ed5i",id:"61-d\u1eef-li\u1ec7u-kh\xf4ng-thay-\u0111\u1ed5i",level:3},{value:"6.2 Ch\u1ec9 hash b\u1ecb thay \u0111\u1ed5i",id:"62-ch\u1ec9-hash-b\u1ecb-thay-\u0111\u1ed5i",level:3},{value:"7. Ch\xednh s\xe1ch GitHub v\u1ec1 commit b\u1ecb ghi \u0111\xe8",id:"7-ch\xednh-s\xe1ch-github-v\u1ec1-commit-b\u1ecb-ghi-\u0111\xe8",level:2},{value:"7.1 Timeline x\xf3a commit",id:"71-timeline-x\xf3a-commit",level:3},{value:"7.2 C\xe1c \u0111i\u1ec3m quan tr\u1ecdng",id:"72-c\xe1c-\u0111i\u1ec3m-quan-tr\u1ecdng",level:3},{value:"8. L\u01b0u \xfd quan tr\u1ecdng",id:"8-l\u01b0u-\xfd-quan-tr\u1ecdng",level:2},{value:"8.1 T\xe1c \u0111\u1ed9ng \u0111\u1ebfn team",id:"81-t\xe1c-\u0111\u1ed9ng-\u0111\u1ebfn-team",level:3},{value:"8.2 Best practices",id:"82-best-practices",level:3},{value:"9. K\u1ebft lu\u1eadn",id:"9-k\u1ebft-lu\u1eadn",level:2}];function a(n){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"c\u1ea5u-tr\xfac-th\u01b0-m\u1ee5c-git-v\xe0-c\xe1ch-lo\u1ea1i-b\u1ecf-commit-kh\xf4ng-mong-mu\u1ed1n",children:"C\u1ea5u tr\xfac th\u01b0 m\u1ee5c Git v\xe0 c\xe1ch lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n"})}),"\n",(0,r.jsxs)(i.p,{children:["B\xe0i vi\u1ebft n\xe0y gi\u1ea3i th\xedch c\u1ea5u tr\xfac th\u01b0 m\u1ee5c ",(0,r.jsx)(i.code,{children:".git"})," v\xe0 h\u01b0\u1edbng d\u1eabn c\xe1ch lo\u1ea1i b\u1ecf c\xe1c commit kh\xf4ng mong mu\u1ed1n (nh\u01b0 th\xeam ",(0,r.jsx)(i.code,{children:"node_modules"}),") kh\u1ecfi l\u1ecbch s\u1eed Git m\xe0 kh\xf4ng l\xe0m thay \u0111\u1ed5i th\xf4ng tin author v\xe0 th\u1eddi gian commit."]}),"\n",(0,r.jsx)(i.h2,{id:"1-c\u1ea5u-tr\xfac-th\u01b0-m\u1ee5c-git",children:"1. C\u1ea5u tr\xfac th\u01b0 m\u1ee5c .git"}),"\n",(0,r.jsx)(i.h3,{id:"11-c\xe1c-th\u01b0-m\u1ee5c-c\u1ed1t-l\xf5i",children:"1.1 C\xe1c th\u01b0 m\u1ee5c c\u1ed1t l\xf5i"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Th\u01b0 m\u1ee5c/File"}),(0,r.jsx)(i.th,{children:"Ch\u1ee9c n\u0103ng"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"objects/"})}),(0,r.jsx)(i.td,{children:"L\u01b0u tr\u1eef t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u c\u1ee7a Git (commits, trees, blobs) d\u01b0\u1edbi d\u1ea1ng hash SHA-1"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"refs/"})}),(0,r.jsx)(i.td,{children:"Ch\u1ee9a c\xe1c tham chi\u1ebfu (references) nh\u01b0 branches, tags, remote branches"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"logs/"})}),(0,r.jsx)(i.td,{children:"L\u01b0u l\u1ecbch s\u1eed thay \u0111\u1ed5i c\u1ee7a c\xe1c refs (reflog)"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"info/"})}),(0,r.jsx)(i.td,{children:"Ch\u1ee9a th\xf4ng tin b\u1ed5 sung nh\u01b0 exclude patterns"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"config"})}),(0,r.jsx)(i.td,{children:"C\u1ea5u h\xecnh repository c\u1ee5 th\u1ec3"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"description"})}),(0,r.jsx)(i.td,{children:"M\xf4 t\u1ea3 repository (d\xf9ng cho GitWeb)"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"HEAD"})}),(0,r.jsx)(i.td,{children:"Tr\u1ecf \u0111\u1ebfn branch hi\u1ec7n t\u1ea1i"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"index"})}),(0,r.jsx)(i.td,{children:"Staging area (nh\u1eefng thay \u0111\u1ed5i chu\u1ea9n b\u1ecb commit)"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"packed-refs"})}),(0,r.jsx)(i.td,{children:"C\xe1c refs \u0111\u01b0\u1ee3c pack \u0111\u1ec3 t\u1ed1i \u01b0u hi\u1ec7u su\u1ea5t"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"12-gi\u1ea3i-th\xedch-chi-ti\u1ebft-objectspack",children:"1.2 Gi\u1ea3i th\xedch chi ti\u1ebft objects/pack"}),"\n",(0,r.jsxs)(i.p,{children:["Th\u01b0 m\u1ee5c ",(0,r.jsx)(i.code,{children:"objects/pack/"})," ch\u1ee9a:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"File .pack"}),": Ch\u1ee9a nhi\u1ec1u objects \u0111\u01b0\u1ee3c n\xe9n l\u1ea1i \u0111\u1ec3 ti\u1ebft ki\u1ec7m kh\xf4ng gian"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"File .idx"}),": Index c\u1ee7a pack file, gi\xfap Git t\xecm ki\u1ebfm nhanh objects"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"File .rev"}),": Reverse index, t\u1ed1i \u01b0u cho vi\u1ec7c truy c\u1eadp pack file"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"T\u1ea1i sao file pack c\xf3 dung l\u01b0\u1ee3ng l\u1edbn?"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'Git t\u1ef1 \u0111\u1ed9ng "pack" c\xe1c objects \u0111\u1ec3 ti\u1ebft ki\u1ec7m kh\xf4ng gian'}),"\n",(0,r.jsx)(i.li,{children:"Repository c\xf3 l\u1ecbch s\u1eed ph\xe1t tri\u1ec3n l\xe2u d\xe0i v\u1edbi nhi\u1ec1u commits"}),"\n",(0,r.jsx)(i.li,{children:"Ch\u1ee9a binary files, images, ho\u1eb7c assets l\u1edbn trong l\u1ecbch s\u1eed"}),"\n",(0,r.jsx)(i.li,{children:"Delta compression l\u01b0u tr\u1eef s\u1ef1 kh\xe1c bi\u1ec7t gi\u1eefa c\xe1c versions"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"2-li\u1ec7t-k\xea-commit-theo-dung-l\u01b0\u1ee3ng",children:"2. Li\u1ec7t k\xea commit theo dung l\u01b0\u1ee3ng"}),"\n",(0,r.jsx)(i.h3,{id:"21-l\u1ec7nh-c\u01a1-b\u1ea3n-li\u1ec7t-k\xea-commit-theo-k\xedch-th\u01b0\u1edbc",children:"2.1 L\u1ec7nh c\u01a1 b\u1ea3n li\u1ec7t k\xea commit theo k\xedch th\u01b0\u1edbc"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Li\u1ec7t k\xea commit theo t\u1ed5ng s\u1ed1 thay \u0111\u1ed5i (insertions + deletions)\r\ngit log --oneline --shortstat | awk '\r\n/^[a-f0-9]/{commit=$0}\r\n/files? changed/{\r\n    insertions=0; deletions=0\r\n    if($0 ~ /[0-9]+ insertions?/) {\r\n        match($0, /([0-9]+) insertions?/, arr)\r\n        insertions=arr[1]\r\n    }\r\n    if($0 ~ /[0-9]+ deletions?/) {\r\n        match($0, /([0-9]+) deletions?/, arr)\r\n        deletions=arr[1]\r\n    }\r\n    total=insertions+deletions\r\n    print total \"\\t\" commit\r\n}' | sort -nr | head -20\n"})}),"\n",(0,r.jsx)(i.h3,{id:"22-t\xecm-c\xe1c-file-l\u1edbn-nh\u1ea5t-trong-repository",children:"2.2 T\xecm c\xe1c file l\u1edbn nh\u1ea5t trong repository"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git rev-list --objects --all | \r\ngit cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | \r\nawk '/^blob/ {print substr($0,6)}' | \r\nsort -k3 -n | \r\ntail -20\n"})}),"\n",(0,r.jsx)(i.h3,{id:"23-ph\xe2n-t\xedch-commit-chi-ti\u1ebft",children:"2.3 Ph\xe2n t\xedch commit chi ti\u1ebft"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:'#!/bin/bash\r\necho "Commit Hash | Files Changed | Insertions | Deletions | Total Changes"\r\necho "------------|---------------|------------|-----------|---------------"\r\n\r\ngit log --pretty=format:\'%h\' --shortstat | while read line; do\r\n    if [[ $line =~ ^[a-f0-9]{7}$ ]]; then\r\n        commit_hash=$line\r\n        read stats\r\n        if [[ -n $stats ]]; then\r\n            files=$(echo $stats | grep -o \'[0-9]\\+ files\\? changed\' | grep -o \'[0-9]\\+\')\r\n            insertions=$(echo $stats | grep -o \'[0-9]\\+ insertions\\?\' | grep -o \'[0-9]\\+\')\r\n            deletions=$(echo $stats | grep -o \'[0-9]\\+ deletions\\?\' | grep -o \'[0-9]\\+\')\r\n            \r\n            files=${files:-0}\r\n            insertions=${insertions:-0}\r\n            deletions=${deletions:-0}\r\n            total=$((insertions + deletions))\r\n            \r\n            printf "%s | %s | %s | %s | %s\\n" "$commit_hash" "$files" "$insertions" "$deletions" "$total"\r\n        fi\r\n    fi\r\ndone | sort -k5 -nr | head -20\n'})}),"\n",(0,r.jsx)(i.h2,{id:"3-lo\u1ea1i-b\u1ecf-commit-kh\xf4ng-mong-mu\u1ed1n-v\u1edbi-git-filter-repo",children:"3. Lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n v\u1edbi git filter-repo"}),"\n",(0,r.jsxs)(i.h3,{id:"31-c\xe0i-\u0111\u1eb7t-git-filter-repo",children:["3.1 C\xe0i \u0111\u1eb7t ",(0,r.jsx)(i.a,{href:"https://github.com/newren/git-filter-repo",children:"git-filter-repo"})]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# C\xe0i \u0111\u1eb7t qua pip\r\npip install git-filter-repo\r\n\r\n# Ho\u1eb7c tr\xean macOS\r\nbrew install git-filter-repo\n"})}),"\n",(0,r.jsx)(i.h3,{id:"32-lo\u1ea1i-b\u1ecf-th\u01b0-m\u1ee5c-kh\u1ecfi-to\xe0n-b\u1ed9-l\u1ecbch-s\u1eed",children:"3.2 Lo\u1ea1i b\u1ecf th\u01b0 m\u1ee5c kh\u1ecfi to\xe0n b\u1ed9 l\u1ecbch s\u1eed"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Lo\u1ea1i b\u1ecf th\u01b0 m\u1ee5c node_modules kh\u1ecfi to\xe0n b\u1ed9 history\r\ngit filter-repo --path node_modules --invert-paths --force\r\n\r\n# Lo\u1ea1i b\u1ecf nhi\u1ec1u patterns c\xf9ng l\xfac\r\ngit filter-repo --path node_modules --path package-lock.json --invert-paths --force\n"})}),"\n",(0,r.jsx)(i.h3,{id:"33-x\u1eed-l\xfd-l\u1ed7i-not-a-fresh-clone",children:'3.3 X\u1eed l\xfd l\u1ed7i "not a fresh clone"'}),"\n",(0,r.jsx)(i.p,{children:"Khi g\u1eb7p l\u1ed7i:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"Aborting: Refusing to destructively overwrite repo history since\r\nthis does not look like a fresh clone.\n"})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Gi\u1ea3i ph\xe1p 1: S\u1eed d\u1ee5ng --force"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git filter-repo --path node_modules --invert-paths --force\n"})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Gi\u1ea3i ph\xe1p 2: T\u1ea1o fresh clone"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Backup branch hi\u1ec7n t\u1ea1i\r\ngit branch backup-original\r\n\r\n# T\u1ea1o fresh clone t\u1eeb local\r\ncd /d\r\ngit clone --no-hardlinks /d/UELDaily UELDaily-clean\r\ncd UELDaily-clean\r\n\r\n# Ch\u1ea1y filter-repo\r\ngit filter-repo --path node_modules --invert-paths\n"})}),"\n",(0,r.jsx)(i.h2,{id:"4-ph\u01b0\u01a1ng-ph\xe1p-thay-th\u1ebf",children:"4. Ph\u01b0\u01a1ng ph\xe1p thay th\u1ebf"}),"\n",(0,r.jsx)(i.h3,{id:"41-s\u1eed-d\u1ee5ng-bfg-repo-cleaner",children:"4.1 S\u1eed d\u1ee5ng BFG Repo-Cleaner"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# T\u1ea3i BFG t\u1eeb https://rtyley.github.io/bfg-repo-cleaner/\r\n# Ho\u1eb7c: brew install bfg (macOS)\r\n\r\n# Clone bare repository\r\ngit clone --mirror https://github.com/user/repo.git repo.git\r\ncd repo.git\r\n\r\n# X\xf3a folder node_modules kh\u1ecfi to\xe0n b\u1ed9 history\r\njava -jar bfg.jar --delete-folders node_modules\r\n\r\n# Push changes\r\ngit reflog expire --expire=now --all && git gc --prune=now --aggressive\r\ngit push --force\n"})}),"\n",(0,r.jsx)(i.h3,{id:"42-git-filter-branch-ph\u01b0\u01a1ng-ph\xe1p-c\u0169",children:"4.2 Git filter-branch (ph\u01b0\u01a1ng ph\xe1p c\u0169)"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git filter-branch --force --index-filter \\\r\n  'git rm -rf --cached --ignore-unmatch node_modules' \\\r\n  --prune-empty --tag-name-filter cat -- --all\n"})}),"\n",(0,r.jsx)(i.h2,{id:"5-d\u1ecdn-d\u1eb9p-sau-khi-filter",children:"5. D\u1ecdn d\u1eb9p sau khi filter"}),"\n",(0,r.jsx)(i.h3,{id:"51-cleanup-commands",children:"5.1 Cleanup commands"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# D\u1ecdn d\u1eb9p reflog v\xe0 garbage collection\r\ngit reflog expire --expire=now --all\r\ngit gc --prune=now --aggressive\r\n\r\n# Force push (C\u1ea8N TH\u1eacN!)\r\ngit push origin --force --all\r\ngit push origin --force --tags\n"})}),"\n",(0,r.jsx)(i.h3,{id:"52-ki\u1ec3m-tra-k\u1ebft-qu\u1ea3",children:"5.2 Ki\u1ec3m tra k\u1ebft qu\u1ea3"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Ki\u1ec3m tra size repository\r\ndu -sh .git\r\n\r\n# Ki\u1ec3m tra c\xe1c file l\u1edbn c\xf2n l\u1ea1i\r\ngit rev-list --objects --all | git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | awk '/^blob/ {print substr($0,6)}' | sort -k3 -n | tail -10\r\n\r\n# Verify node_modules \u0111\xe3 b\u1ecb x\xf3a\r\ngit log --all --full-history -- node_modules\n"})}),"\n",(0,r.jsx)(i.h2,{id:"6-th\xf4ng-tin-\u0111\u01b0\u1ee3c-b\u1ea3o-to\xe0n",children:"6. Th\xf4ng tin \u0111\u01b0\u1ee3c b\u1ea3o to\xe0n"}),"\n",(0,r.jsx)(i.h3,{id:"61-d\u1eef-li\u1ec7u-kh\xf4ng-thay-\u0111\u1ed5i",children:"6.1 D\u1eef li\u1ec7u kh\xf4ng thay \u0111\u1ed5i"}),"\n",(0,r.jsx)(i.p,{children:"Khi s\u1eed d\u1ee5ng git filter-repo, c\xe1c th\xf4ng tin sau \u0111\u01b0\u1ee3c gi\u1eef nguy\xean:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Author name & email"})," - Ng\u01b0\u1eddi t\u1ea1o commit"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Author date"})," - Th\u1eddi gian commit \u0111\u01b0\u1ee3c t\u1ea1o"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Commit message"})," - N\u1ed9i dung commit"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Committer name & email"})," - Ng\u01b0\u1eddi apply commit"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Committer date"})," - Th\u1eddi gian commit \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"62-ch\u1ec9-hash-b\u1ecb-thay-\u0111\u1ed5i",children:"6.2 Ch\u1ec9 hash b\u1ecb thay \u0111\u1ed5i"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:'# Ki\u1ec3m tra tr\u01b0\u1edbc v\xe0 sau filter\r\n# Tr\u01b0\u1edbc khi filter\r\ngit log --format="%H|%ad|%an|%s" --date=iso > commits_before.txt\r\n\r\n# Sau khi filter\r\ngit log --format="%H|%ad|%an|%s" --date=iso > commits_after.txt\r\n\r\n# So s\xe1nh (ch\u1ec9 hash kh\xe1c, c\xf2n l\u1ea1i gi\u1ed1ng nhau)\r\npaste commits_before.txt commits_after.txt | column -t -s\'|\'\n'})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"V\xed d\u1ee5 k\u1ebft qu\u1ea3:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"Tr\u01b0\u1edbc: abc123|2023-01-15 10:30:00|John Doe|Add feature X\r\nSau:   def456|2023-01-15 10:30:00|John Doe|Add feature X\n"})}),"\n",(0,r.jsx)(i.h2,{id:"7-ch\xednh-s\xe1ch-github-v\u1ec1-commit-b\u1ecb-ghi-\u0111\xe8",children:"7. Ch\xednh s\xe1ch GitHub v\u1ec1 commit b\u1ecb ghi \u0111\xe8"}),"\n",(0,r.jsx)(i.h3,{id:"71-timeline-x\xf3a-commit",children:"7.1 Timeline x\xf3a commit"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Ng\xe0y 1"}),": Force push, commit c\u0169 b\u1ecb ghi \u0111\xe8"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Ng\xe0y 1-30"}),": Commit c\u0169 v\u1eabn t\u1ed3n t\u1ea1i, c\xf3 th\u1ec3 truy c\u1eadp"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Ng\xe0y 30-90"}),": GitHub ch\u1ea1y garbage collection"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Sau ng\xe0y 90"}),": Commit c\u0169 b\u1ecb x\xf3a v\u0129nh vi\u1ec5n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"72-c\xe1c-\u0111i\u1ec3m-quan-tr\u1ecdng",children:"7.2 C\xe1c \u0111i\u1ec3m quan tr\u1ecdng"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Commits b\u1ecb ghi \u0111\xe8 l\u01b0u tr\u1eef t\u1ea1m th\u1eddi 30-90 ng\xe0y"}),"\n",(0,r.jsx)(i.li,{children:"Pull Requests \u0111\xe3 merge l\u01b0u v\u0129nh vi\u1ec5n ngay c\u1ea3 khi branch b\u1ecb x\xf3a"}),"\n",(0,r.jsx)(i.li,{children:"C\xf3 th\u1ec3 kh\xf4i ph\u1ee5c trong grace period n\u1ebfu bi\u1ebft commit hash"}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Truy c\u1eadp commit c\u0169 trong grace period\r\ngit show <old-commit-hash>\n"})}),"\n",(0,r.jsx)(i.h2,{id:"8-l\u01b0u-\xfd-quan-tr\u1ecdng",children:"8. L\u01b0u \xfd quan tr\u1ecdng"}),"\n",(0,r.jsx)(i.h3,{id:"81-t\xe1c-\u0111\u1ed9ng-\u0111\u1ebfn-team",children:"8.1 T\xe1c \u0111\u1ed9ng \u0111\u1ebfn team"}),"\n",(0,r.jsxs)(i.p,{children:["\u26a0\ufe0f ",(0,r.jsx)(i.strong,{children:"C\u1ea3nh b\xe1o"}),": Vi\u1ec7c rewrite history c\xf3 t\xe1c \u0111\u1ed9ng l\u1edbn:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Backup repository tr\u01b0\u1edbc khi th\u1ef1c hi\u1ec7n"}),"\n",(0,r.jsx)(i.li,{children:"Th\xf4ng b\xe1o team v\xec h\u1ecd c\u1ea7n re-clone repository"}),"\n",(0,r.jsx)(i.li,{children:"T\u1ea5t c\u1ea3 collaborators ph\u1ea3i x\xf3a local repo v\xe0 clone l\u1ea1i"}),"\n",(0,r.jsx)(i.li,{children:"Pull requests/forks s\u1ebd b\u1ecb conflict"}),"\n",(0,r.jsx)(i.li,{children:"Commit hashes thay \u0111\u1ed5i ho\xe0n to\xe0n"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"82-best-practices",children:"8.2 Best practices"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# 1. Backup tr\u01b0\u1edbc khi th\u1ef1c hi\u1ec7n\r\ngit branch backup-before-filter\r\n\r\n# 2. Test tr\xean clone ri\xeang\r\ngit clone --no-hardlinks original-repo test-repo\r\n\r\n# 3. Th\xf4ng b\xe1o team ngay l\u1eadp t\u1ee9c\r\n# 4. Y\xeau c\u1ea7u m\u1ecdi ng\u01b0\u1eddi re-clone repository\r\n# 5. \u0110\u1ee3i 90 ng\xe0y \u0111\u1ec3 GitHub garbage collect\n"})}),"\n",(0,r.jsx)(i.h2,{id:"9-k\u1ebft-lu\u1eadn",children:"9. K\u1ebft lu\u1eadn"}),"\n",(0,r.jsx)(i.p,{children:"Vi\u1ec7c lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n kh\u1ecfi Git history l\xe0 possible nh\u01b0ng c\u1ea7n c\u1ea9n tr\u1ecdng. Ph\u01b0\u01a1ng ph\xe1p git filter-repo l\xe0 khuy\u1ebfn ngh\u1ecb v\xec:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Nhanh v\xe0 hi\u1ec7u qu\u1ea3"})," h\u01a1n filter-branch"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"B\u1ea3o to\xe0n th\xf4ng tin"})," author v\xe0 timestamp"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Flexible"})," v\u1edbi nhi\u1ec1u t\xf9y ch\u1ecdn filter"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"An to\xe0n"})," h\u01a1n c\xe1c ph\u01b0\u01a1ng ph\xe1p kh\xe1c"]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"L\u01b0u \xfd cu\u1ed1i"}),": Lu\xf4n backup v\xe0 th\xf4ng b\xe1o team tr\u01b0\u1edbc khi th\u1ef1c hi\u1ec7n rewrite history!"]})]})}function d(n={}){const{wrapper:i}={...(0,c.R)(),...n.components};return i?(0,r.jsx)(i,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},8453:(n,i,e)=>{e.d(i,{R:()=>l,x:()=>h});var t=e(6540);const r={},c=t.createContext(r);function l(n){const i=t.useContext(c);return t.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function h(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),t.createElement(c.Provider,{value:i},n.children)}}}]);