"use strict";(self.webpackChunkviethungle_0503=self.webpackChunkviethungle_0503||[]).push([[8630],{1679:n=>{n.exports=JSON.parse('{"permalink":"/viethungle/blog/bloom-filter-redis-username-check","editUrl":"https://github.com/viethungle0503/viethungle/tree/main/docs/blog/2025-06-10-bloom-filter-redis-username-check/index.md","source":"@site/blog/2025-06-10-bloom-filter-redis-username-check/index.md","title":"Ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp trong 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng v\u1edbi Bloom Filter v\xe0 Redis","description":"P/s: \u0110\u1eebng tr\u1ea3 l\u1eddi ki\u1ec3u \\"h\u1ec7 th\u1ed1ng c\u1ee7a em \u0111\xe2u c\xf3 \u0111\u1ebfn 1 t\u1ef7 user \u0111\xe2u anh \u01a1i\u2026\\" nha! \u1ede c\xf4ng ty c\xf3 quy m\xf4 t\u1eeb v\u1eeba \u0111\u1ebfn l\u1edbn th\xec vi\u1ec7c ti\u1ebft ki\u1ec7m t\xe0i nguy\xean v\xe0 ph\u1ea3n h\u1ed3i nhanh r\u1ea5t \u0111\u01b0\u1ee3c quan t\xe2m, ph\u1ecfng v\u1ea5n th\xec ph\u1ea3i c\xf3 t\xed challenge m\u1edbi vui ch\u1ee9!","date":"2025-06-10T00:00:00.000Z","tags":[{"inline":false,"label":"Redis","permalink":"/viethungle/blog/tags/redis","description":"Redis in-memory data structure store"},{"inline":false,"label":"Bloom Filter","permalink":"/viethungle/blog/tags/bloom-filter","description":"Probabilistic data structure for membership testing"},{"inline":false,"label":"Database","permalink":"/viethungle/blog/tags/database","description":"Database systems and optimization techniques"},{"inline":false,"label":"System Design","permalink":"/viethungle/blog/tags/system-design","description":"Large-scale system architecture and design patterns"},{"inline":false,"label":"Performance","permalink":"/viethungle/blog/tags/performance","description":"Performance optimization and scalability topics"},{"inline":false,"label":"Interview","permalink":"/viethungle/blog/tags/interview","description":"Interview questions about techniques"},{"inline":false,"label":"Development","permalink":"/viethungle/blog/tags/development","description":"Software development tools and practices"}],"readingTime":5.78,"hasTruncateMarker":true,"authors":[{"name":"L\xea Vi\u1ec7t H\u01b0ng","title":"Realtime Robotics Web Developer","url":"https://github.com/viethungle0503","page":{"permalink":"/viethungle/blog/authors/viethungle-0503"},"socials":{"github":"https://github.com/viethungle0503"},"imageURL":"https://github.com/viethungle0503.png","key":"viethungle0503"}],"frontMatter":{"slug":"bloom-filter-redis-username-check","title":"Ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp trong 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng v\u1edbi Bloom Filter v\xe0 Redis","authors":"viethungle0503","tags":["redis","bloom-filter","database","system-design","performance","interview","development"]},"unlisted":false,"nextItem":{"title":"So S\xe1nh Chi Ti\u1ebft: AlovaJS vs Axios - L\u1ef1a Ch\u1ecdn HTTP Client N\xe0o Cho D\u1ef1 \xc1n Frontend?","permalink":"/viethungle/blog/alova-vs-axios-comparison"}}')},5892:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>t,toc:()=>a});var t=i(1679),h=i(4848),r=i(8453);const l={slug:"bloom-filter-redis-username-check",title:"Ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp trong 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng v\u1edbi Bloom Filter v\xe0 Redis",authors:"viethungle0503",tags:["redis","bloom-filter","database","system-design","performance","interview","development"]},s="Ph\u1ecfng v\u1ea5n: L\xe0m th\u1ebf n\xe0o \u0111\u1ec3 ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 t\u1ed3n t\u1ea1i trong 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng?",c={authorsImageUrls:[void 0]},a=[{value:"\ud83d\ude80 Gi\u1ea3i ph\xe1p t\u1ed1i \u01b0u: RedisBloom - Bloom Filter tr\xean Redis!",id:"-gi\u1ea3i-ph\xe1p-t\u1ed1i-\u01b0u-redisbloom---bloom-filter-tr\xean-redis",level:2},{value:"Bloom Filter l\xe0 g\xec?",id:"bloom-filter-l\xe0-g\xec",level:3},{value:"\ud83c\udfaf B\xe0i to\xe1n: Ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp trong 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng",id:"-b\xe0i-to\xe1n-ki\u1ec3m-tra-t\xean-\u0111\u0103ng-nh\u1eadp-trong-1-t\u1ef7-ng\u01b0\u1eddi-d\xf9ng",level:2},{value:"Th\xe1ch th\u1ee9c ch\xednh:",id:"th\xe1ch-th\u1ee9c-ch\xednh",level:3},{value:"\ud83d\udca1 Gi\u1ea3i ph\xe1p: Bloom Filter v\u1edbi RedisBloom",id:"-gi\u1ea3i-ph\xe1p-bloom-filter-v\u1edbi-redisbloom",level:2},{value:"Bloom Filter ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\xe0o?",id:"bloom-filter-ho\u1ea1t-\u0111\u1ed9ng-nh\u01b0-th\u1ebf-n\xe0o",level:3},{value:"1. C\u1ea5u tr\xfac d\u1eef li\u1ec7u:",id:"1-c\u1ea5u-tr\xfac-d\u1eef-li\u1ec7u",level:4},{value:"2. Th\xeam ph\u1ea7n t\u1eed (username):",id:"2-th\xeam-ph\u1ea7n-t\u1eed-username",level:4},{value:"3. Ki\u1ec3m tra ph\u1ea7n t\u1eed:",id:"3-ki\u1ec3m-tra-ph\u1ea7n-t\u1eed",level:4},{value:"\ud83c\udfc6 \u01afu \u0111i\u1ec3m c\u1ee7a gi\u1ea3i ph\xe1p:",id:"-\u01b0u-\u0111i\u1ec3m-c\u1ee7a-gi\u1ea3i-ph\xe1p",level:2},{value:"1. Ti\u1ebft ki\u1ec7m b\u1ed9 nh\u1edb c\u1ef1c k\u1ef3:",id:"1-ti\u1ebft-ki\u1ec7m-b\u1ed9-nh\u1edb-c\u1ef1c-k\u1ef3",level:3},{value:"2. T\u1ed1c \u0111\u1ed9 si\xeau nhanh:",id:"2-t\u1ed1c-\u0111\u1ed9-si\xeau-nhanh",level:3},{value:"3. False Positive \u0111\u01b0\u1ee3c ki\u1ec3m so\xe1t:",id:"3-false-positive-\u0111\u01b0\u1ee3c-ki\u1ec3m-so\xe1t",level:3},{value:"\u2699\ufe0f Tri\u1ec3n khai th\u1ef1c t\u1ebf v\u1edbi RedisBloom:",id:"\ufe0f-tri\u1ec3n-khai-th\u1ef1c-t\u1ebf-v\u1edbi-redisbloom",level:2},{value:"Quy tr\xecnh ki\u1ec3m tra t\u1ed1i \u01b0u:",id:"quy-tr\xecnh-ki\u1ec3m-tra-t\u1ed1i-\u01b0u",level:3},{value:"\ud83d\udcca L\u1ee3i \xedch trong th\u1ef1c t\u1ebf:",id:"-l\u1ee3i-\xedch-trong-th\u1ef1c-t\u1ebf",level:2},{value:"\ud83d\udd27 \u0110i\u1ec1u ch\u1ec9nh t\u1ef7 l\u1ec7 False Positive",id:"-\u0111i\u1ec1u-ch\u1ec9nh-t\u1ef7-l\u1ec7-false-positive",level:2},{value:"a) K\xedch th\u01b0\u1edbc m\u1ea3ng bit (m):",id:"a-k\xedch-th\u01b0\u1edbc-m\u1ea3ng-bit-m",level:3},{value:"b) S\u1ed1 h\xe0m hash (k):",id:"b-s\u1ed1-h\xe0m-hash-k",level:3},{value:"c) S\u1ed1 ph\u1ea7n t\u1eed th\u1ef1c t\u1ebf (n):",id:"c-s\u1ed1-ph\u1ea7n-t\u1eed-th\u1ef1c-t\u1ebf-n",level:3},{value:"C\u1ea5u h\xecnh RedisBloom:",id:"c\u1ea5u-h\xecnh-redisbloom",level:3},{value:"\ud83d\uddc4\ufe0f Redis KH\xd4NG l\u01b0u cache to\xe0n b\u1ed9 username",id:"\ufe0f-redis-kh\xf4ng-l\u01b0u-cache-to\xe0n-b\u1ed9-username",level:2},{value:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng th\u1ef1c t\u1ebf:",id:"c\xe1ch-ho\u1ea1t-\u0111\u1ed9ng-th\u1ef1c-t\u1ebf",level:3},{value:"B\u01b0\u1edbc 1: Kh\u1edfi t\u1ea1o Bloom Filter r\u1ed7ng",id:"b\u01b0\u1edbc-1-kh\u1edfi-t\u1ea1o-bloom-filter-r\u1ed7ng",level:4},{value:"B\u01b0\u1edbc 2: D\u1ea7n d\u1ea7n th\xeam username v\xe0o filter",id:"b\u01b0\u1edbc-2-d\u1ea7n-d\u1ea7n-th\xeam-username-v\xe0o-filter",level:4},{value:"B\u01b0\u1edbc 3: Ki\u1ec3m tra username",id:"b\u01b0\u1edbc-3-ki\u1ec3m-tra-username",level:4},{value:"V\xed d\u1ee5 c\u1ee5 th\u1ec3:",id:"v\xed-d\u1ee5-c\u1ee5-th\u1ec3",level:3},{value:"\ud83d\udcc8 So s\xe1nh b\u1ed9 nh\u1edb:",id:"-so-s\xe1nh-b\u1ed9-nh\u1edb",level:2},{value:"L\u01b0u tr\u1ef1c ti\u1ebfp trong Redis:",id:"l\u01b0u-tr\u1ef1c-ti\u1ebfp-trong-redis",level:3},{value:"D\xf9ng Bloom Filter:",id:"d\xf9ng-bloom-filter",level:3},{value:"\ud83d\udd04 Quy tr\xecnh \u0111\u1ed3ng b\u1ed9 d\u1eef li\u1ec7u:",id:"-quy-tr\xecnh-\u0111\u1ed3ng-b\u1ed9-d\u1eef-li\u1ec7u",level:2},{value:"\ud83c\udfaf K\u1ebft lu\u1eadn",id:"-k\u1ebft-lu\u1eadn",level:2}];function o(n){const e={br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(e.p,{children:(0,h.jsx)(e.em,{children:'P/s: \u0110\u1eebng tr\u1ea3 l\u1eddi ki\u1ec3u "h\u1ec7 th\u1ed1ng c\u1ee7a em \u0111\xe2u c\xf3 \u0111\u1ebfn 1 t\u1ef7 user \u0111\xe2u anh \u01a1i\u2026" nha! \u1ede c\xf4ng ty c\xf3 quy m\xf4 t\u1eeb v\u1eeba \u0111\u1ebfn l\u1edbn th\xec vi\u1ec7c ti\u1ebft ki\u1ec7m t\xe0i nguy\xean v\xe0 ph\u1ea3n h\u1ed3i nhanh r\u1ea5t \u0111\u01b0\u1ee3c quan t\xe2m, ph\u1ecfng v\u1ea5n th\xec ph\u1ea3i c\xf3 t\xed challenge m\u1edbi vui ch\u1ee9!'})}),"\n",(0,h.jsx)(e.p,{children:"V\u1edbi h\xe0ng t\u1ef7 ng\u01b0\u1eddi d\xf9ng, l\xe0m sao h\u1ec7 th\u1ed1ng c\xf3 th\u1ec3 ki\u1ec3m tra nhanh t\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng hay ch\u01b0a? N\u1ebfu m\u1ed7i l\u1ea7n \u0111\u1ec1u truy v\u1ea5n tr\u1ef1c ti\u1ebfp v\xe0o database th\xec s\u1ebd r\u1ea5t ch\u1eadm v\xe0 t\u1ed1n t\xe0i nguy\xean."}),"\n",(0,h.jsx)(e.h2,{id:"-gi\u1ea3i-ph\xe1p-t\u1ed1i-\u01b0u-redisbloom---bloom-filter-tr\xean-redis",children:"\ud83d\ude80 Gi\u1ea3i ph\xe1p t\u1ed1i \u01b0u: RedisBloom - Bloom Filter tr\xean Redis!"}),"\n",(0,h.jsx)(e.h3,{id:"bloom-filter-l\xe0-g\xec",children:"Bloom Filter l\xe0 g\xec?"}),"\n",(0,h.jsx)(e.p,{children:'M\u1ed9t c\u1ea5u tr\xfac d\u1eef li\u1ec7u "th\xf4ng minh", chuy\xean d\xf9ng ki\u1ec3m tra xem ph\u1ea7n t\u1eed c\xf3 thu\u1ed9c t\u1eadp h\u1ee3p kh\xf4ng, v\u1edbi c\xe1c \u0111i\u1ec3m m\u1ea1nh sau:'}),"\n",(0,h.jsxs)(e.p,{children:["\u2705 ",(0,h.jsx)(e.strong,{children:"Si\xeau ti\u1ebft ki\u1ec7m b\u1ed9 nh\u1edb"}),": Ch\u1ec9 c\u1ea7n m\u1ed9t ph\u1ea7n nh\u1ecf dung l\u01b0\u1ee3ng so v\u1edbi vi\u1ec7c l\u01b0u to\xe0n b\u1ed9 d\u1eef li\u1ec7u.",(0,h.jsx)(e.br,{}),"\n","\u2705 ",(0,h.jsx)(e.strong,{children:"T\u1ed1c \u0111\u1ed9 truy v\u1ea5n c\u1ef1c nhanh"}),": Ch\u1ec9 v\xe0i thao t\xe1c hash l\xe0 c\xf3 ngay k\u1ebft qu\u1ea3.",(0,h.jsx)(e.br,{}),"\n","\u26a0\ufe0f ",(0,h.jsx)(e.strong,{children:'Nh\u01b0ng c\xf3 th\u1ec3 tr\u1ea3 v\u1ec1 "d\u01b0\u01a1ng t\xednh gi\u1ea3" (false positive)'}),": \u0110\xf4i l\xfac b\xe1o t\xean \u0111\xe3 t\u1ed3n t\u1ea1i, m\u1eb7c d\xf9 th\u1eadt ra ch\u01b0a (trong tr\u01b0\u1eddng h\u1ee3p n\xe0y kh\xf4ng g\xe2y \u1ea3nh h\u01b0\u1edfng g\xec c\u1ea3)."]}),"\n",(0,h.jsx)(e.p,{children:'Tuy v\u1eady, trong th\u1ef1c t\u1ebf (nh\u01b0 ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp), m\u1ee9c "nh\u1ea7m" n\xe0y ho\xe0n to\xe0n ki\u1ec3m so\xe1t v\xe0 ch\u1ea5p nh\u1eadn \u0111\u01b0\u1ee3c \u2013 \u0111\u1ed5i l\u1ea1i b\u1ea1n c\xf3 t\u1ed1c \u0111\u1ed9 x\u1eed l\xfd c\u1ef1c nhanh v\xe0 b\u1ed9 nh\u1edb si\xeau t\u1ed1i \u01b0u!'}),"\n",(0,h.jsx)(e.h2,{id:"-b\xe0i-to\xe1n-ki\u1ec3m-tra-t\xean-\u0111\u0103ng-nh\u1eadp-trong-1-t\u1ef7-ng\u01b0\u1eddi-d\xf9ng",children:"\ud83c\udfaf B\xe0i to\xe1n: Ki\u1ec3m tra t\xean \u0111\u0103ng nh\u1eadp trong 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng"}),"\n",(0,h.jsx)(e.h3,{id:"th\xe1ch-th\u1ee9c-ch\xednh",children:"Th\xe1ch th\u1ee9c ch\xednh:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"V\u1edbi 1 t\u1ef7 ng\u01b0\u1eddi d\xf9ng, vi\u1ec7c truy v\u1ea5n tr\u1ef1c ti\u1ebfp database m\u1ed7i l\u1ea7n ki\u1ec3m tra s\u1ebd r\u1ea5t ch\u1eadm"}),"\n",(0,h.jsx)(e.li,{children:"T\u1ed1n nhi\u1ec1u t\xe0i nguy\xean h\u1ec7 th\u1ed1ng (CPU, I/O, network)"}),"\n",(0,h.jsx)(e.li,{children:"Tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\xf9ng k\xe9m do ph\u1ea3i ch\u1edd \u0111\u1ee3i"}),"\n"]}),"\n",(0,h.jsx)(e.h2,{id:"-gi\u1ea3i-ph\xe1p-bloom-filter-v\u1edbi-redisbloom",children:"\ud83d\udca1 Gi\u1ea3i ph\xe1p: Bloom Filter v\u1edbi RedisBloom"}),"\n",(0,h.jsx)(e.h3,{id:"bloom-filter-ho\u1ea1t-\u0111\u1ed9ng-nh\u01b0-th\u1ebf-n\xe0o",children:"Bloom Filter ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\xe0o?"}),"\n",(0,h.jsx)(e.h4,{id:"1-c\u1ea5u-tr\xfac-d\u1eef-li\u1ec7u",children:"1. C\u1ea5u tr\xfac d\u1eef li\u1ec7u:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"L\xe0 m\u1ed9t m\u1ea3ng bit c\xf3 k\xedch th\u01b0\u1edbc c\u1ed1 \u0111\u1ecbnh (v\xed d\u1ee5: 10 tri\u1ec7u bit)"}),"\n",(0,h.jsx)(e.li,{children:"Ban \u0111\u1ea7u t\u1ea5t c\u1ea3 bit \u0111\u1ec1u = 0"}),"\n",(0,h.jsx)(e.li,{children:"S\u1eed d\u1ee5ng nhi\u1ec1u h\xe0m hash kh\xe1c nhau (th\u01b0\u1eddng 3-7 h\xe0m)"}),"\n"]}),"\n",(0,h.jsx)(e.h4,{id:"2-th\xeam-ph\u1ea7n-t\u1eed-username",children:"2. Th\xeam ph\u1ea7n t\u1eed (username):"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{children:'Username "john123" \u2192 \r\nHash1("john123") = 1247 \u2192 set bit[1247] = 1\r\nHash2("john123") = 8932 \u2192 set bit[8932] = 1  \r\nHash3("john123") = 5681 \u2192 set bit[5681] = 1\n'})}),"\n",(0,h.jsx)(e.h4,{id:"3-ki\u1ec3m-tra-ph\u1ea7n-t\u1eed",children:"3. Ki\u1ec3m tra ph\u1ea7n t\u1eed:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{children:'Ki\u1ec3m tra "mary456" \u2192\r\nHash1("mary456") = 1247 \u2192 bit[1247] = 1 \u2713\r\nHash2("mary456") = 3421 \u2192 bit[3421] = 0 \u2717\r\n\u2192 K\u1ebft qu\u1ea3: KH\xd4NG t\u1ed3n t\u1ea1i (ch\u1eafc ch\u1eafn 100%)\r\n\r\nKi\u1ec3m tra "bob789" \u2192\r\nHash1("bob789") = 1247 \u2192 bit[1247] = 1 \u2713\r\nHash2("bob789") = 8932 \u2192 bit[8932] = 1 \u2713\r\nHash3("bob789") = 2156 \u2192 bit[2156] = 1 \u2713\r\n\u2192 K\u1ebft qu\u1ea3: C\xd3 TH\u1ec2 t\u1ed3n t\u1ea1i (c\u1ea7n ki\u1ec3m tra th\xeam)\n'})}),"\n",(0,h.jsx)(e.h2,{id:"-\u01b0u-\u0111i\u1ec3m-c\u1ee7a-gi\u1ea3i-ph\xe1p",children:"\ud83c\udfc6 \u01afu \u0111i\u1ec3m c\u1ee7a gi\u1ea3i ph\xe1p:"}),"\n",(0,h.jsx)(e.h3,{id:"1-ti\u1ebft-ki\u1ec7m-b\u1ed9-nh\u1edb-c\u1ef1c-k\u1ef3",children:"1. Ti\u1ebft ki\u1ec7m b\u1ed9 nh\u1edb c\u1ef1c k\u1ef3:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"1 t\u1ef7 username n\u1ebfu l\u01b0u tr\u1ef1c ti\u1ebfp"}),": ~50GB (trung b\xecnh 50 k\xfd t\u1ef1/username)"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"Bloom Filter"}),": ch\u1ec9 c\u1ea7n ~1.2GB v\u1edbi t\u1ef7 l\u1ec7 false positive 1%"]}),"\n"]}),"\n",(0,h.jsx)(e.h3,{id:"2-t\u1ed1c-\u0111\u1ed9-si\xeau-nhanh",children:"2. T\u1ed1c \u0111\u1ed9 si\xeau nhanh:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"Ch\u1ec9 c\u1ea7n v\xe0i ph\xe9p hash \u0111\u01a1n gi\u1ea3n"}),"\n",(0,h.jsx)(e.li,{children:"Kh\xf4ng c\u1ea7n truy v\u1ea5n database"}),"\n",(0,h.jsx)(e.li,{children:"Th\u1eddi gian tr\u1ea3 l\u1eddi: O(k) v\u1edbi k l\xe0 s\u1ed1 h\xe0m hash"}),"\n"]}),"\n",(0,h.jsx)(e.h3,{id:"3-false-positive-\u0111\u01b0\u1ee3c-ki\u1ec3m-so\xe1t",children:"3. False Positive \u0111\u01b0\u1ee3c ki\u1ec3m so\xe1t:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"C\xf3 th\u1ec3 \u0111i\u1ec1u ch\u1ec9nh t\u1ef7 l\u1ec7 false positive (1%, 0.1%, 0.01%...)"}),"\n",(0,h.jsx)(e.li,{children:'Kh\xf4ng bao gi\u1edd c\xf3 False Negative (n\u1ebfu n\xf3 n\xf3i "kh\xf4ng t\u1ed3n t\u1ea1i" th\xec ch\u1eafc ch\u1eafn kh\xf4ng t\u1ed3n t\u1ea1i)'}),"\n"]}),"\n",(0,h.jsx)(e.h2,{id:"\ufe0f-tri\u1ec3n-khai-th\u1ef1c-t\u1ebf-v\u1edbi-redisbloom",children:"\u2699\ufe0f Tri\u1ec3n khai th\u1ef1c t\u1ebf v\u1edbi RedisBloom:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-bash",children:'# T\u1ea1o Bloom Filter\r\nBF.RESERVE usernames 0.01 1000000000\r\n\r\n# Th\xeam username\r\nBF.ADD usernames "john123"\r\n\r\n# Ki\u1ec3m tra username\r\nBF.EXISTS usernames "mary456"\n'})}),"\n",(0,h.jsx)(e.h3,{id:"quy-tr\xecnh-ki\u1ec3m-tra-t\u1ed1i-\u01b0u",children:"Quy tr\xecnh ki\u1ec3m tra t\u1ed1i \u01b0u:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:'def check_username_exists(username):\r\n    # B\u01b0\u1edbc 1: Ki\u1ec3m tra Bloom Filter (si\xeau nhanh)\r\n    if not bloom_filter.exists(username):\r\n        return False  # Ch\u1eafc ch\u1eafn kh\xf4ng t\u1ed3n t\u1ea1i\r\n    \r\n    # B\u01b0\u1edbc 2: Ch\u1ec9 khi Bloom Filter b\xe1o "c\xf3 th\u1ec3 t\u1ed3n t\u1ea1i" \r\n    # m\u1edbi truy v\u1ea5n database \u0111\u1ec3 x\xe1c nh\u1eadn\r\n    return database.exists(username)\n'})}),"\n",(0,h.jsx)(e.h2,{id:"-l\u1ee3i-\xedch-trong-th\u1ef1c-t\u1ebf",children:"\ud83d\udcca L\u1ee3i \xedch trong th\u1ef1c t\u1ebf:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"Gi\u1ea3m 99%+ truy v\u1ea5n database"}),": Ch\u1ec9 nh\u1eefng tr\u01b0\u1eddng h\u1ee3p false positive m\u1edbi c\u1ea7n truy v\u1ea5n DB"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"T\u0103ng t\u1ed1c \u0111\u1ed9 ph\u1ea3n h\u1ed3i"}),": T\u1eeb 100ms xu\u1ed1ng c\xf2n 1ms"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"Ti\u1ebft ki\u1ec7m chi ph\xed"}),": \xcdt t\u1ea3i cho database server, gi\u1ea3m chi ph\xed cloud"]}),"\n"]}),"\n",(0,h.jsx)(e.h2,{id:"-\u0111i\u1ec1u-ch\u1ec9nh-t\u1ef7-l\u1ec7-false-positive",children:"\ud83d\udd27 \u0110i\u1ec1u ch\u1ec9nh t\u1ef7 l\u1ec7 False Positive"}),"\n",(0,h.jsx)(e.p,{children:"C\xf3 3 tham s\u1ed1 ch\xednh \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn false positive:"}),"\n",(0,h.jsx)(e.h3,{id:"a-k\xedch-th\u01b0\u1edbc-m\u1ea3ng-bit-m",children:"a) K\xedch th\u01b0\u1edbc m\u1ea3ng bit (m):"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"M\u1ea3ng bit c\xe0ng l\u1edbn \u2192 false positive c\xe0ng th\u1ea5p"}),"\n",(0,h.jsx)(e.li,{children:"Nh\u01b0ng t\u1ed1n nhi\u1ec1u b\u1ed9 nh\u1edb h\u01a1n"}),"\n"]}),"\n",(0,h.jsx)(e.h3,{id:"b-s\u1ed1-h\xe0m-hash-k",children:"b) S\u1ed1 h\xe0m hash (k):"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:["C\xf3 c\xf4ng th\u1ee9c t\u1ed1i \u01b0u: ",(0,h.jsx)(e.code,{children:"k = (m/n) \xd7 ln(2)"})]}),"\n",(0,h.jsx)(e.li,{children:"V\u1edbi m = k\xedch th\u01b0\u1edbc m\u1ea3ng bit, n = s\u1ed1 ph\u1ea7n t\u1eed"}),"\n",(0,h.jsx)(e.li,{children:"Qu\xe1 \xedt hash \u2192 nhi\u1ec1u collision"}),"\n",(0,h.jsx)(e.li,{children:"Qu\xe1 nhi\u1ec1u hash \u2192 t\u0103ng x\xe1c su\u1ea5t false positive"}),"\n"]}),"\n",(0,h.jsx)(e.h3,{id:"c-s\u1ed1-ph\u1ea7n-t\u1eed-th\u1ef1c-t\u1ebf-n",children:"c) S\u1ed1 ph\u1ea7n t\u1eed th\u1ef1c t\u1ebf (n):"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"C\xe0ng nhi\u1ec1u ph\u1ea7n t\u1eed \u2192 false positive c\xe0ng cao"}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:(0,h.jsx)(e.strong,{children:"C\xf4ng th\u1ee9c false positive:"})}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{children:"p \u2248 (1 - e^(-kn/m))^k\n"})}),"\n",(0,h.jsx)(e.h3,{id:"c\u1ea5u-h\xecnh-redisbloom",children:"C\u1ea5u h\xecnh RedisBloom:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-bash",children:"# C\xe1ch 1: Thi\u1ebft l\u1eadp false positive rate tr\u1ef1c ti\u1ebfp\r\nBF.RESERVE usernames 0.01 1000000000\r\n#                     \u2191     \u2191\r\n#               false_rate capacity\r\n\r\n# C\xe1ch 2: Thi\u1ebft l\u1eadp th\u1ee7 c\xf4ng c\xe1c tham s\u1ed1\r\nBF.RESERVE usernames 0.01 1000000000 EXPANSION 2 NONSCALING\n"})}),"\n",(0,h.jsx)(e.h2,{id:"\ufe0f-redis-kh\xf4ng-l\u01b0u-cache-to\xe0n-b\u1ed9-username",children:"\ud83d\uddc4\ufe0f Redis KH\xd4NG l\u01b0u cache to\xe0n b\u1ed9 username"}),"\n",(0,h.jsxs)(e.p,{children:[(0,h.jsx)(e.strong,{children:"\u0110i\u1ec3m quan tr\u1ecdng"}),": Redis kh\xf4ng l\u01b0u tr\u1eef c\xe1c username th\u1ef1c t\u1ebf, m\xe0 ch\u1ec9 l\u01b0u m\u1ea3ng bit c\u1ee7a Bloom Filter."]}),"\n",(0,h.jsx)(e.h3,{id:"c\xe1ch-ho\u1ea1t-\u0111\u1ed9ng-th\u1ef1c-t\u1ebf",children:"C\xe1ch ho\u1ea1t \u0111\u1ed9ng th\u1ef1c t\u1ebf:"}),"\n",(0,h.jsx)(e.h4,{id:"b\u01b0\u1edbc-1-kh\u1edfi-t\u1ea1o-bloom-filter-r\u1ed7ng",children:"B\u01b0\u1edbc 1: Kh\u1edfi t\u1ea1o Bloom Filter r\u1ed7ng"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-bash",children:"BF.RESERVE usernames 0.01 1000000000\r\n# T\u1ea1o m\u1ea3ng bit r\u1ed7ng, k\xedch th\u01b0\u1edbc ~1.2GB\n"})}),"\n",(0,h.jsx)(e.h4,{id:"b\u01b0\u1edbc-2-d\u1ea7n-d\u1ea7n-th\xeam-username-v\xe0o-filter",children:"B\u01b0\u1edbc 2: D\u1ea7n d\u1ea7n th\xeam username v\xe0o filter"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:'# Khi user \u0111\u0103ng k\xfd th\xe0nh c\xf4ng\r\ndef register_user(username):\r\n    # L\u01b0u v\xe0o database\r\n    database.insert_user(username)\r\n    \r\n    # \u0110\u1ed3ng th\u1eddi \u0111\xe1nh d\u1ea5u trong Bloom Filter\r\n    redis.execute_command("BF.ADD", "usernames", username)\n'})}),"\n",(0,h.jsx)(e.h4,{id:"b\u01b0\u1edbc-3-ki\u1ec3m-tra-username",children:"B\u01b0\u1edbc 3: Ki\u1ec3m tra username"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:'def check_username_available(username):\r\n    # Ch\u1ec9 ki\u1ec3m tra m\u1ea3ng bit, KH\xd4NG c\u1ea7n truy c\u1eadp username g\u1ed1c\r\n    exists_in_filter = redis.execute_command("BF.EXISTS", "usernames", username)\r\n    \r\n    if not exists_in_filter:\r\n        return True  # Ch\u1eafc ch\u1eafn username available\r\n    else:\r\n        # False positive c\xf3 th\u1ec3 x\u1ea3y ra, c\u1ea7n ki\u1ec3m tra DB\r\n        return not database.exists(username)\n'})}),"\n",(0,h.jsx)(e.h3,{id:"v\xed-d\u1ee5-c\u1ee5-th\u1ec3",children:"V\xed d\u1ee5 c\u1ee5 th\u1ec3:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:'# Gi\u1ea3 s\u1eed c\xf3 username "john123"\r\nusername = "john123"\r\n\r\n# Khi th\xeam v\xe0o Bloom Filter:\r\nhash1 = hash_func1("john123") % array_size  # = 1247\r\nhash2 = hash_func2("john123") % array_size  # = 8932  \r\nhash3 = hash_func3("john123") % array_size  # = 5681\r\n\r\n# Redis ch\u1ec9 l\u01b0u:\r\nbit_array[1247] = 1\r\nbit_array[8932] = 1\r\nbit_array[5681] = 1\r\n\r\n# KH\xd4NG l\u01b0u chu\u1ed7i "john123" \u1edf \u0111\xe2u c\u1ea3!\n'})}),"\n",(0,h.jsx)(e.h2,{id:"-so-s\xe1nh-b\u1ed9-nh\u1edb",children:"\ud83d\udcc8 So s\xe1nh b\u1ed9 nh\u1edb:"}),"\n",(0,h.jsx)(e.h3,{id:"l\u01b0u-tr\u1ef1c-ti\u1ebfp-trong-redis",children:"L\u01b0u tr\u1ef1c ti\u1ebfp trong Redis:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:'# T\u1ed1n ~50GB cho 1 t\u1ef7 username\r\nredis.set("user:john123", "exists")\r\nredis.set("user:mary456", "exists")\r\n# ... 1 t\u1ef7 records\n'})}),"\n",(0,h.jsx)(e.h3,{id:"d\xf9ng-bloom-filter",children:"D\xf9ng Bloom Filter:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:"# Ch\u1ec9 t\u1ed1n ~1.2GB cho m\u1ea3ng bit\r\n# Ch\u1ee9a th\xf4ng tin v\u1ec1 1 t\u1ef7 username nh\u01b0ng kh\xf4ng l\u01b0u username g\u1ed1c\r\nbit_array = [0,1,0,1,1,0,0,1,0,1,...]  # 10 t\u1ef7 bit\n"})}),"\n",(0,h.jsx)(e.h2,{id:"-quy-tr\xecnh-\u0111\u1ed3ng-b\u1ed9-d\u1eef-li\u1ec7u",children:"\ud83d\udd04 Quy tr\xecnh \u0111\u1ed3ng b\u1ed9 d\u1eef li\u1ec7u:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-python",children:'# Khi kh\u1edfi \u0111\u1ed9ng h\u1ec7 th\u1ed1ng l\u1ea7n \u0111\u1ea7u\r\ndef initialize_bloom_filter():\r\n    redis.execute_command("BF.RESERVE", "usernames", 0.01, 1000000000)\r\n    \r\n    # Load t\u1ea5t c\u1ea3 username t\u1eeb DB v\xe0 th\xeam v\xe0o filter\r\n    for username in database.get_all_usernames():\r\n        redis.execute_command("BF.ADD", "usernames", username)\n'})}),"\n",(0,h.jsx)(e.h2,{id:"-k\u1ebft-lu\u1eadn",children:"\ud83c\udfaf K\u1ebft lu\u1eadn"}),"\n",(0,h.jsxs)(e.p,{children:["\u0110\xe2y l\xe0 m\u1ed9t v\xed d\u1ee5 \u0111i\u1ec3n h\xecnh v\u1ec1 c\xe1ch t\u1ed1i \u01b0u h\xf3a h\u1ec7 th\u1ed1ng l\u1edbn b\u1eb1ng c\xe1ch ch\u1ea5p nh\u1eadn trade-off th\xf4ng minh: ",(0,h.jsx)(e.strong,{children:"\u0111\u1ed5i m\u1ed9t ch\xfat \u0111\u1ed9 ch\xednh x\xe1c l\u1ea5y hi\u1ec7u su\u1ea5t v\u01b0\u1ee3t tr\u1ed9i"}),"."]}),"\n",(0,h.jsx)(e.p,{children:"Redis ch\u1ec9 l\u01b0u tr\u1eef m\u1ed9t c\u1ea5u tr\xfac d\u1eef li\u1ec7u nh\u1ecf g\u1ecdn (m\u1ea3ng bit) \u0111\u1ea1i di\u1ec7n cho 1 t\u1ef7 username, ch\u1ee9 kh\xf4ng ph\u1ea3i l\u01b0u cache 1 t\u1ef7 string username!"}),"\n",(0,h.jsx)(e.hr,{}),"\n",(0,h.jsx)(e.p,{children:(0,h.jsx)(e.em,{children:"B\xe0i vi\u1ebft n\xe0y gi\u1ea3i \u0111\xe1p chi ti\u1ebft v\u1ec1 m\u1ed9t c\xe2u h\u1ecfi ph\u1ecfng v\u1ea5n system design ph\u1ed5 bi\u1ebfn v\xe0 c\xe1ch \xe1p d\u1ee5ng Bloom Filter trong th\u1ef1c t\u1ebf \u0111\u1ec3 x\xe2y d\u1ef1ng h\u1ec7 th\u1ed1ng c\xf3 hi\u1ec7u su\u1ea5t cao."})})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,h.jsx)(e,{...n,children:(0,h.jsx)(o,{...n})}):o(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>s});var t=i(6540);const h={},r=t.createContext(h);function l(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(h):n.components||h:l(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);