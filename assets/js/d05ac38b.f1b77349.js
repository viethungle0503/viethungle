"use strict";(self.webpackChunkviethungle_0503=self.webpackChunkviethungle_0503||[]).push([[1133],{5869:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>h,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"tutorials/viettelidc-chi-thay-20gb","title":"Kh\u1eafc ph\u1ee5c m\xe1y ViettelIDC ch\u1ec9 hi\u1ec3n th\u1ecb 20 GB thay v\xec 100 GB (Ubuntu)","description":"Ch\u1ea9n \u0111o\xe1n v\xe0 m\u1edf r\u1ed9ng ph\xe2n v\xf9ng/Filesystem khi g\xf3i 100 GB nh\u01b0ng h\u1ec7 th\u1ed1ng ch\u1ec9 hi\u1ec3n th\u1ecb ~20 GB. K\xe8m g\u1ee3i \xfd c\xf4ng c\u1ee5 qu\u1ea3n l\xfd/gi\xe1m s\xe1t server.","source":"@site/docs/tutorials/viettelidc-chi-thay-20gb.md","sourceDirName":"tutorials","slug":"/tutorials/viettelidc-chi-thay-20gb","permalink":"/viethungle/docs/tutorials/viettelidc-chi-thay-20gb","draft":false,"unlisted":false,"editUrl":"https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/viettelidc-chi-thay-20gb.md","tags":[],"version":"current","sidebarPosition":18,"frontMatter":{"sidebar_position":18,"title":"Kh\u1eafc ph\u1ee5c m\xe1y ViettelIDC ch\u1ec9 hi\u1ec3n th\u1ecb 20 GB thay v\xec 100 GB (Ubuntu)","slug":"viettelidc-chi-thay-20gb","sidebar_label":"Ubuntu ch\u1ec9 th\u1ea5y 20 GB (fix)","description":"Ch\u1ea9n \u0111o\xe1n v\xe0 m\u1edf r\u1ed9ng ph\xe2n v\xf9ng/Filesystem khi g\xf3i 100 GB nh\u01b0ng h\u1ec7 th\u1ed1ng ch\u1ec9 hi\u1ec3n th\u1ecb ~20 GB. K\xe8m g\u1ee3i \xfd c\xf4ng c\u1ee5 qu\u1ea3n l\xfd/gi\xe1m s\xe1t server."},"sidebar":"tutorialSidebar","previous":{"title":"C\u1ea5u h\xecnh Cloudflare Tunnel cho Supabase Self-hosted","permalink":"/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide"},"next":{"title":"Qu\u1ea3n l\xfd script background","permalink":"/viethungle/docs/tutorials/background-script-management"}}');var t=s(4848),c=s(8453);const h={sidebar_position:18,title:"Kh\u1eafc ph\u1ee5c m\xe1y ViettelIDC ch\u1ec9 hi\u1ec3n th\u1ecb 20 GB thay v\xec 100 GB (Ubuntu)",slug:"viettelidc-chi-thay-20gb",sidebar_label:"Ubuntu ch\u1ec9 th\u1ea5y 20 GB (fix)",description:"Ch\u1ea9n \u0111o\xe1n v\xe0 m\u1edf r\u1ed9ng ph\xe2n v\xf9ng/Filesystem khi g\xf3i 100 GB nh\u01b0ng h\u1ec7 th\u1ed1ng ch\u1ec9 hi\u1ec3n th\u1ecb ~20 GB. K\xe8m g\u1ee3i \xfd c\xf4ng c\u1ee5 qu\u1ea3n l\xfd/gi\xe1m s\xe1t server."},d=void 0,l={},r=[{value:"T\xf3m t\u1eaft t\xecnh hu\u1ed1ng",id:"t\xf3m-t\u1eaft-t\xecnh-hu\u1ed1ng",level:2},{value:"C\xe1ch ki\u1ec3m tra ban \u0111\u1ea7u",id:"c\xe1ch-ki\u1ec3m-tra-ban-\u0111\u1ea7u",level:2},{value:"Kh\u1eafc ph\u1ee5c (khuy\u1ebfn ngh\u1ecb, <strong>kh\xf4ng c\u1ea7n reboot</strong>)",id:"kh\u1eafc-ph\u1ee5c-khuy\u1ebfn-ngh\u1ecb-kh\xf4ng-c\u1ea7n-reboot",level:2},{value:"B\u01b0\u1edbc 1 \u2014 C\xe0i c\xf4ng c\u1ee5",id:"b\u01b0\u1edbc-1--c\xe0i-c\xf4ng-c\u1ee5",level:3},{value:"B\u01b0\u1edbc 2 \u2014 S\u1eeda v\u1ecb tr\xed backup GPT v\u1ec1 cu\u1ed1i \u0111\u0129a",id:"b\u01b0\u1edbc-2--s\u1eeda-v\u1ecb-tr\xed-backup-gpt-v\u1ec1-cu\u1ed1i-\u0111\u0129a",level:3},{value:"B\u01b0\u1edbc 3 \u2014 N\u1edbi ph\xe2n v\xf9ng root chi\u1ebfm h\u1ebft ph\u1ea7n tr\u1ed1ng",id:"b\u01b0\u1edbc-3--n\u1edbi-ph\xe2n-v\xf9ng-root-chi\u1ebfm-h\u1ebft-ph\u1ea7n-tr\u1ed1ng",level:3},{value:"B\u01b0\u1edbc 4 \u2014 M\u1edf r\u1ed9ng filesystem ext4 \u0111ang mount t\u1ea1i <code>/</code>",id:"b\u01b0\u1edbc-4--m\u1edf-r\u1ed9ng-filesystem-ext4-\u0111ang-mount-t\u1ea1i-",level:3},{value:"Ki\u1ec3m tra sau khi m\u1edf r\u1ed9ng",id:"ki\u1ec3m-tra-sau-khi-m\u1edf-r\u1ed9ng",level:3},{value:"Ph\u01b0\u01a1ng \xe1n thay th\u1ebf (n\u1ebfu kh\xf4ng d\xf9ng <code>growpart</code>)",id:"ph\u01b0\u01a1ng-\xe1n-thay-th\u1ebf-n\u1ebfu-kh\xf4ng-d\xf9ng-growpart",level:2},{value:"FAQ / L\u01b0u \xfd",id:"faq--l\u01b0u-\xfd",level:2},{value:"Checklist nhanh (\u0111\u1ec3 d\xe1n v\xe0o Runbook)",id:"checklist-nhanh-\u0111\u1ec3-d\xe1n-v\xe0o-runbook",level:2}];function o(n){const e={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"t\xf3m-t\u1eaft-t\xecnh-hu\u1ed1ng",children:"T\xf3m t\u1eaft t\xecnh hu\u1ed1ng"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"M\xf4i tr\u01b0\u1eddng"}),": VM t\u1ea1i ViettelIDC (g\xf3i T2.Gen04, SSD 100 GB), Ubuntu 24.04."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Tri\u1ec7u ch\u1ee9ng"}),": H\u1ec7 \u0111i\u1ec1u h\xe0nh ch\u1ec9 th\u1ea5y ~20 GB cho ",(0,t.jsx)(e.code,{children:"/"})," (root)."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Quan s\xe1t"}),":","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"lsblk"})," cho th\u1ea5y \u0111\u0129a ",(0,t.jsx)(e.strong,{children:"/dev/vda = 100 G"})," nh\u01b0ng ",(0,t.jsx)(e.strong,{children:"/dev/vda2 = 20 G"})," (root)."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"fdisk -l"})," b\xe1o:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"GPT PMBR size mismatch \u2026"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"The backup GPT table is not on the end of the device."})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"duf"})," c\xe0i b\u1eb1ng ",(0,t.jsx)(e.code,{children:"sudo apt install duf"})," (duf utility is an enhanced version of the du and df commands combined) command cho k\u1ebft qu\u1ea3 nh\u01b0 sau:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 1 local device                                                                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 MOUNTED ON \u2502  SIZE \u2502  USED \u2502 AVAIL \u2502              USE%             \u2502 TYPE \u2502 FILESYSTEM \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 /          \u2502 19.5G \u2502 14.7G \u2502  3.8G \u2502 [###############.....]  75.3% \u2502 ext4 \u2502 /dev/vda2  \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 6 special devices                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 MOUNTED ON     \u2502 SIZE \u2502  USED \u2502 AVAIL \u2502              USE%             \u2502 TYPE     \u2502 FILESYSTEM \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 /dev           \u2502 7.8G \u2502    0B \u2502  7.8G \u2502                               \u2502 devtmpfs \u2502 udev       \u2502\n\u2502 /dev/shm       \u2502 7.8G \u2502    0B \u2502  7.8G \u2502                               \u2502 tmpfs    \u2502 tmpfs      \u2502\n\u2502 /run           \u2502 1.6G \u2502  2.3M \u2502  1.6G \u2502 [....................]   0.1% \u2502 tmpfs    \u2502 tmpfs      \u2502\n\u2502 /run/lock      \u2502 5.0M \u2502    0B \u2502  5.0M \u2502                               \u2502 tmpfs    \u2502 tmpfs      \u2502\n\u2502 /run/qemu      \u2502 7.8G \u2502    0B \u2502  7.8G \u2502                               \u2502 tmpfs    \u2502 tmpfs      \u2502\n\u2502 /run/user/1000 \u2502 1.6G \u2502 20.0K \u2502  1.6G \u2502 [....................]   0.0% \u2502 tmpfs    \u2502 tmpfs      \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Nguy\xean nh\xe2n"}),": Nh\xe0 cung c\u1ea5p \u0111\xe3 t\u0103ng k\xedch th\u01b0\u1edbc \u0111\u0129a l\xean 100 GB nh\u01b0ng ",(0,t.jsx)(e.strong,{children:"ph\xe2n v\xf9ng"})," v\xe0 ",(0,t.jsx)(e.strong,{children:"backup GPT"})," ch\u01b0a \u0111\u01b0\u1ee3c \u201cn\u1edbi\u201d t\u1edbi cu\u1ed1i \u0111\u0129a \u2192 ph\u1ea7n tr\u1ed1ng c\xf2n ",(0,t.jsx)(e.strong,{children:"unallocated"}),"."]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"c\xe1ch-ki\u1ec3m-tra-ban-\u0111\u1ea7u",children:"C\xe1ch ki\u1ec3m tra ban \u0111\u1ea7u"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"lsblk -o NAME,SIZE,TYPE,FSTYPE,MOUNTPOINT\nsudo fdisk -l /dev/vda\ndf -hT /\n"})}),"\n",(0,t.jsx)(e.p,{children:"K\u1ef3 v\u1ecdng k\u1ebft qu\u1ea3 tr\u01b0\u1edbc khi s\u1eeda:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"NAME    SIZE TYPE FSTYPE M\nvda     100G disk\n\u251c\u2500vda1    1M part\n\u2514\u2500vda2   20G part ext4   /\nGPT PMBR size mismatch (41943039 != 209715199) will be corrected by write.\nThe backup GPT table is not on the end of the device.\nDisk /dev/vda: 100 GiB, 107374182400 bytes, 209715200 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: gpt\nDisk identifier: D1A0D6DD-30BB-4FCA-A78B-48E720C3D1D9\n\nDevice     Start      End  Sectors Size Type\n/dev/vda1   2048     4095     2048   1M BIOS boot\n/dev/vda2   4096 41940991 41936896  20G Linux filesystem\nFilesystem     Type  Size  Used Avail Use% Mounted on\n/dev/vda2      ext4   20G   15G  4.1G  79% /\n\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.h2,{id:"kh\u1eafc-ph\u1ee5c-khuy\u1ebfn-ngh\u1ecb-kh\xf4ng-c\u1ea7n-reboot",children:["Kh\u1eafc ph\u1ee5c (khuy\u1ebfn ngh\u1ecb, ",(0,t.jsx)(e.strong,{children:"kh\xf4ng c\u1ea7n reboot"}),")"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Khuy\u1ebfn c\xe1o"}),": Snapshot/backup tr\u01b0\u1edbc khi thao t\xe1c ph\xe2n v\xf9ng."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"b\u01b0\u1edbc-1--c\xe0i-c\xf4ng-c\u1ee5",children:"B\u01b0\u1edbc 1 \u2014 C\xe0i c\xf4ng c\u1ee5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y gdisk cloud-guest-utils\n"})}),"\n",(0,t.jsx)(e.h3,{id:"b\u01b0\u1edbc-2--s\u1eeda-v\u1ecb-tr\xed-backup-gpt-v\u1ec1-cu\u1ed1i-\u0111\u0129a",children:"B\u01b0\u1edbc 2 \u2014 S\u1eeda v\u1ecb tr\xed backup GPT v\u1ec1 cu\u1ed1i \u0111\u0129a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo sgdisk -e /dev/vda\n"})}),"\n",(0,t.jsx)(e.p,{children:"K\u1ebft qu\u1ea3 mong \u0111\u1ee3i:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Warning: The kernel is still using the old partition table.\nThe new table will be used at the next reboot or after you\nrun partprobe(8) or kpartx(8)\nThe operation has completed successfully.\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:['L\u1ec7nh n\xe0y "k\xe9o" backup GPT ra cu\u1ed1i thi\u1ebft b\u1ecb, lo\u1ea1i b\u1ecf c\u1ea3nh b\xe1o ',(0,t.jsx)(e.code,{children:"PMBR size mismatch"}),"/",(0,t.jsx)(e.code,{children:"backup GPT\u2026"}),"."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"b\u01b0\u1edbc-3--n\u1edbi-ph\xe2n-v\xf9ng-root-chi\u1ebfm-h\u1ebft-ph\u1ea7n-tr\u1ed1ng",children:"B\u01b0\u1edbc 3 \u2014 N\u1edbi ph\xe2n v\xf9ng root chi\u1ebfm h\u1ebft ph\u1ea7n tr\u1ed1ng"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo growpart /dev/vda 2\n"})}),"\n",(0,t.jsx)(e.p,{children:"K\u1ebft qu\u1ea3 mong \u0111\u1ee3i:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"CHANGED: partition=2 start=4096 old: size=41936896 end=41940991 new: size=209711071 end=209715166\n"})}),"\n",(0,t.jsxs)(e.h3,{id:"b\u01b0\u1edbc-4--m\u1edf-r\u1ed9ng-filesystem-ext4-\u0111ang-mount-t\u1ea1i-",children:["B\u01b0\u1edbc 4 \u2014 M\u1edf r\u1ed9ng filesystem ext4 \u0111ang mount t\u1ea1i ",(0,t.jsx)(e.code,{children:"/"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo resize2fs /dev/vda2\n"})}),"\n",(0,t.jsx)(e.p,{children:"K\u1ebft qu\u1ea3 mong \u0111\u1ee3i:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"resize2fs 1.47.0 (5-Feb-2023)\nFilesystem at /dev/vda2 is mounted on /; on-line resizing required\nold_desc_blocks = 3, new_desc_blocks = 13\nThe filesystem on /dev/vda2 is now 26213883 (4k) blocks long.\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"resize2fs"})," h\u1ed7 tr\u1ee3 ",(0,t.jsx)(e.strong,{children:"online grow"})," cho ext4, kh\xf4ng c\u1ea7n umount hay downtime."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"ki\u1ec3m-tra-sau-khi-m\u1edf-r\u1ed9ng",children:"Ki\u1ec3m tra sau khi m\u1edf r\u1ed9ng"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"lsblk -o NAME,SIZE,TYPE,FSTYPE,MOUNTPOINT\ndf -hT /\nsudo sgdisk -v /dev/vda\n"})}),"\n",(0,t.jsx)(e.p,{children:"K\u1ef3 v\u1ecdng k\u1ebft qu\u1ea3:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"NAME    SIZE TYPE FSTYPE MOUNTPOINT\nvda     100G disk\n\u251c\u2500vda1    1M part\n\u2514\u2500vda2  100G part ext4   /\nFilesystem     Type  Size  Used Avail Use% Mounted on\n/dev/vda2      ext4   99G   15G   80G  16% /\n\nCaution: Partition 2 doesn't end on a 2048-sector boundary. This may\nresult in problems with some disk encryption tools.\n\nNo problems found. 2014 free sectors (1007.0 KiB) available in 1\nsegments, the largest of which is 2014 (1007.0 KiB) in size.\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["L\u01b0u \xfd: 100 GB (th\u1eadp ph\xe2n) hi\u1ec3n th\u1ecb kho\u1ea3ng ~93 GiB (nh\u1ecb ph\xe2n) tr\xean ",(0,t.jsx)(e.code,{children:"df"}),", tr\u1eeb th\xeam ch\xfat overhead l\xe0 b\xecnh th\u01b0\u1eddng."]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.h2,{id:"ph\u01b0\u01a1ng-\xe1n-thay-th\u1ebf-n\u1ebfu-kh\xf4ng-d\xf9ng-growpart",children:["Ph\u01b0\u01a1ng \xe1n thay th\u1ebf (n\u1ebfu kh\xf4ng d\xf9ng ",(0,t.jsx)(e.code,{children:"growpart"}),")"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo apt-get install -y gdisk parted\nsudo sgdisk -e /dev/vda            # S\u1eeda backup GPT\nsudo parted /dev/vda\n(parted) print\n(parted) resizepart 2 100%\n(parted) quit\n\nsudo resize2fs /dev/vda2           # M\u1edf r\u1ed9ng ext4\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"faq--l\u01b0u-\xfd",children:"FAQ / L\u01b0u \xfd"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"partprobe: command not found"})}),(0,t.jsx)(e.br,{}),"\n","Kh\xf4ng sao; n\u1ebfu c\u1ea7n c\xf3 th\u1ec3 ",(0,t.jsx)(e.code,{children:"sudo apt-get install -y parted"})," (cung c\u1ea5p ",(0,t.jsx)(e.code,{children:"partprobe"}),"). Th\u1ef1c t\u1ebf, sau ",(0,t.jsx)(e.code,{children:"growpart"}),", kernel th\u01b0\u1eddng \u0111\xe3 th\u1ea5y k\xedch th\u01b0\u1edbc m\u1edbi. Trong tr\u01b0\u1eddng h\u1ee3p n\xe0y, l\u1ec7nh ",(0,t.jsx)(e.code,{children:"partprobe"})," kh\xf4ng c\u1ea7n thi\u1ebft v\xec c\xe1c thay \u0111\u1ed5i \u0111\xe3 \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng th\xe0nh c\xf4ng."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Filesystem XFS?"}),(0,t.jsx)(e.br,{}),"\n","Thay ",(0,t.jsx)(e.code,{children:"resize2fs"})," b\u1eb1ng:","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo xfs_growfs -d /\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"C\xf3 c\u1ea7n reboot?"}),(0,t.jsx)(e.br,{}),"\n","Kh\xf4ng, c\xe1c b\u01b0\u1edbc tr\xean \u0111\u1ec1u h\u1ed7 tr\u1ee3 m\u1edf r\u1ed9ng \u201conline\u201d."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["C\xf3 ",(0,t.jsx)(e.code,{children:"swap.img"})," trong ",(0,t.jsx)(e.code,{children:"/"})]}),(0,t.jsx)(e.br,{}),"\n","Kh\xf4ng c\u1ea7n ch\u1ec9nh; n\xf3 t\u1ef1 \u201c\u0111\u01b0\u1ee3c l\u1ee3i\u201d dung l\u01b0\u1ee3ng sau khi m\u1edf r\u1ed9ng."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"D\xf9ng LVM?"}),(0,t.jsx)(e.br,{}),"\n","B\xe0i n\xe0y \xe1p d\u1ee5ng tr\u1ef1c ti\u1ebfp cho ph\xe2n v\xf9ng th\u01b0\u1eddng. N\u1ebfu l\xe0 LVM: ",(0,t.jsx)(e.code,{children:"pvresize"})," \u2192 ",(0,t.jsx)(e.code,{children:"lvextend"})," \u2192 ",(0,t.jsx)(e.code,{children:"resize2fs/xfs_growfs"}),"."]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"checklist-nhanh-\u0111\u1ec3-d\xe1n-v\xe0o-runbook",children:"Checklist nhanh (\u0111\u1ec3 d\xe1n v\xe0o Runbook)"}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(e.code,{children:"lsblk"}),", ",(0,t.jsx)(e.code,{children:"fdisk -l"})," x\xe1c nh\u1eadn c\xf2n unallocated sau ",(0,t.jsx)(e.code,{children:"/dev/vda2"}),"."]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(e.code,{children:"sgdisk -e /dev/vda"})," s\u1eeda backup GPT."]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(e.code,{children:"growpart /dev/vda 2"})," n\u1edbi ph\xe2n v\xf9ng."]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(e.code,{children:"resize2fs /dev/vda2"})," (ho\u1eb7c ",(0,t.jsx)(e.code,{children:"xfs_growfs -d /"}),")."]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(e.code,{children:"df -hT /"})," ki\u1ec3m tra dung l\u01b0\u1ee3ng m\u1edbi."]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(e.code,{children:"sudo sgdisk -v /dev/vda"})," ki\u1ec3m tra t\xednh to\xe0n v\u1eb9n GPT."]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ","C\xe2n nh\u1eafc c\xe0i ",(0,t.jsx)(e.strong,{children:"Cockpit/Netdata"})," \u0111\u1ec3 qu\u1ea3n l\xfd/gi\xe1m s\xe1t v\u1ec1 sau."]}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"K\u1ebft qu\u1ea3"}),": VM 100 GB \u0111\xe3 s\u1eed d\u1ee5ng \u0111\u1ee7 dung l\u01b0\u1ee3ng, kh\xf4ng c\xf2n gi\u1edbi h\u1ea1n 20 GB."]}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>h,x:()=>d});var i=s(6540);const t={},c=i.createContext(t);function h(n){const e=i.useContext(c);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:h(n.components),i.createElement(c.Provider,{value:e},n.children)}}}]);