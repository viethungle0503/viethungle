"use strict";(self.webpackChunkviethungle_0503=self.webpackChunkviethungle_0503||[]).push([[123],{8453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>h});var i=s(6540);const c={},l=i.createContext(c);function r(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function h(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:r(n.components),i.createElement(l.Provider,{value:e},n.children)}},9678:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>h,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tutorials/background-script-management","title":"19. Ch\u1ea1y script d\u01b0\u1edbi n\u1ec1n: Qu\u1ea3n l\xfd background processes v\xe0 logs","description":"H\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1ch ch\u1ea1y script d\u01b0\u1edbi n\u1ec1n, qu\u1ea3n l\xfd logs, t\xecm v\xe0 t\u1eaft processes. Bao g\u1ed3m nohup, screen, tmux v\xe0 MobaXterm quick commands.","source":"@site/docs/tutorials/background-script-management.md","sourceDirName":"tutorials","slug":"/tutorials/background-script-management","permalink":"/viethungle/docs/tutorials/background-script-management","draft":false,"unlisted":false,"editUrl":"https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/background-script-management.md","tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19,"title":"19. Ch\u1ea1y script d\u01b0\u1edbi n\u1ec1n: Qu\u1ea3n l\xfd background processes v\xe0 logs","slug":"background-script-management","sidebar_label":"Qu\u1ea3n l\xfd script background","description":"H\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1ch ch\u1ea1y script d\u01b0\u1edbi n\u1ec1n, qu\u1ea3n l\xfd logs, t\xecm v\xe0 t\u1eaft processes. Bao g\u1ed3m nohup, screen, tmux v\xe0 MobaXterm quick commands."},"sidebar":"tutorialSidebar","previous":{"title":"Ubuntu ch\u1ec9 th\u1ea5y 20 GB (fix)","permalink":"/viethungle/docs/tutorials/viettelidc-chi-thay-20gb"},"next":{"title":"S\u1eed d\u1ee5ng S3Express \u0111\u1ec3 upload image l\xean DigitalOcean Spaces","permalink":"/viethungle/docs/tutorials/s3express_digitalocean_guide"}}');var c=s(4848),l=s(8453);const r={sidebar_position:19,title:"19. Ch\u1ea1y script d\u01b0\u1edbi n\u1ec1n: Qu\u1ea3n l\xfd background processes v\xe0 logs",slug:"background-script-management",sidebar_label:"Qu\u1ea3n l\xfd script background",description:"H\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1ch ch\u1ea1y script d\u01b0\u1edbi n\u1ec1n, qu\u1ea3n l\xfd logs, t\xecm v\xe0 t\u1eaft processes. Bao g\u1ed3m nohup, screen, tmux v\xe0 MobaXterm quick commands."},h=void 0,t={},o=[{value:"T\xf3m t\u1eaft",id:"t\xf3m-t\u1eaft",level:2},{value:"1. C\xe1c c\xe1ch ch\u1ea1y script d\u01b0\u1edbi background",id:"1-c\xe1c-c\xe1ch-ch\u1ea1y-script-d\u01b0\u1edbi-background",level:2},{value:"C\xe1ch 1: Background \u0111\u01a1n gi\u1ea3n",id:"c\xe1ch-1-background-\u0111\u01a1n-gi\u1ea3n",level:3},{value:"C\xe1ch 2: S\u1eed d\u1ee5ng nohup (khuy\u1ebfn ngh\u1ecb)",id:"c\xe1ch-2-s\u1eed-d\u1ee5ng-nohup-khuy\u1ebfn-ngh\u1ecb",level:3},{value:"C\xe1ch 3: L\u01b0u PID \u0111\u1ec3 qu\u1ea3n l\xfd d\u1ec5 d\xe0ng",id:"c\xe1ch-3-l\u01b0u-pid-\u0111\u1ec3-qu\u1ea3n-l\xfd-d\u1ec5-d\xe0ng",level:3},{value:"C\xe1ch 4: Ch\u1ea1y v\u1edbi log file",id:"c\xe1ch-4-ch\u1ea1y-v\u1edbi-log-file",level:3},{value:"C\xe1ch 5: S\u1eed d\u1ee5ng screen",id:"c\xe1ch-5-s\u1eed-d\u1ee5ng-screen",level:3},{value:"C\xe1ch 6: S\u1eed d\u1ee5ng tmux",id:"c\xe1ch-6-s\u1eed-d\u1ee5ng-tmux",level:3},{value:"2. Qu\u1ea3n l\xfd v\xe0 theo d\xf5i logs",id:"2-qu\u1ea3n-l\xfd-v\xe0-theo-d\xf5i-logs",level:2},{value:"Ch\u1ea1y script v\u1edbi log file",id:"ch\u1ea1y-script-v\u1edbi-log-file",level:3},{value:"Xem logs theo nhi\u1ec1u c\xe1ch",id:"xem-logs-theo-nhi\u1ec1u-c\xe1ch",level:3},{value:"Xem to\xe0n b\u1ed9 log",id:"xem-to\xe0n-b\u1ed9-log",level:4},{value:"Xem log real-time (khuy\u1ebfn ngh\u1ecb)",id:"xem-log-real-time-khuy\u1ebfn-ngh\u1ecb",level:4},{value:"Xem n d\xf2ng cu\u1ed1i c\xf9ng",id:"xem-n-d\xf2ng-cu\u1ed1i-c\xf9ng",level:4},{value:"Xem log v\u1edbi timestamps",id:"xem-log-v\u1edbi-timestamps",level:4},{value:"S\u1eed d\u1ee5ng tee \u0111\u1ec3 v\u1eeba xem v\u1eeba l\u01b0u",id:"s\u1eed-d\u1ee5ng-tee-\u0111\u1ec3-v\u1eeba-xem-v\u1eeba-l\u01b0u",level:4},{value:"Rotate logs (tr\xe1nh file qu\xe1 l\u1edbn)",id:"rotate-logs-tr\xe1nh-file-qu\xe1-l\u1edbn",level:3},{value:"3. T\xecm v\xe0 qu\u1ea3n l\xfd background processes",id:"3-t\xecm-v\xe0-qu\u1ea3n-l\xfd-background-processes",level:2},{value:"Ki\u1ec3m tra process \u0111ang ch\u1ea1y",id:"ki\u1ec3m-tra-process-\u0111ang-ch\u1ea1y",level:3},{value:"T\xecm theo t\xean script",id:"t\xecm-theo-t\xean-script",level:4},{value:"T\xecm theo t\xean process chi ti\u1ebft h\u01a1n",id:"t\xecm-theo-t\xean-process-chi-ti\u1ebft-h\u01a1n",level:4},{value:"S\u1eed d\u1ee5ng pgrep (g\u1ecdn h\u01a1n)",id:"s\u1eed-d\u1ee5ng-pgrep-g\u1ecdn-h\u01a1n",level:4},{value:"Hi\u1ec3n th\u1ecb process tree",id:"hi\u1ec3n-th\u1ecb-process-tree",level:4},{value:"Kill processes",id:"kill-processes",level:3},{value:"Kill b\u1eb1ng PID file (n\u1ebfu \u0111\xe3 l\u01b0u)",id:"kill-b\u1eb1ng-pid-file-n\u1ebfu-\u0111\xe3-l\u01b0u",level:4},{value:"Kill b\u1eb1ng t\xean process",id:"kill-b\u1eb1ng-t\xean-process",level:4},{value:"Force kill n\u1ebfu c\u1ea7n",id:"force-kill-n\u1ebfu-c\u1ea7n",level:4},{value:"Kill t\u1ea5t c\u1ea3 processes li\xean quan",id:"kill-t\u1ea5t-c\u1ea3-processes-li\xean-quan",level:4},{value:"Ki\u1ec3m tra process c\xf3 ch\u1ea1y kh\xf4ng",id:"ki\u1ec3m-tra-process-c\xf3-ch\u1ea1y-kh\xf4ng",level:3},{value:"4. Qu\u1ea3n l\xfd session v\u1edbi screen v\xe0 tmux",id:"4-qu\u1ea3n-l\xfd-session-v\u1edbi-screen-v\xe0-tmux",level:2},{value:"Screen commands",id:"screen-commands",level:3},{value:"T\u1ea1o v\xe0 qu\u1ea3n l\xfd session",id:"t\u1ea1o-v\xe0-qu\u1ea3n-l\xfd-session",level:4},{value:"Screen trong ch\u1ebf \u0111\u1ed9 daemon",id:"screen-trong-ch\u1ebf-\u0111\u1ed9-daemon",level:4},{value:"Tmux commands",id:"tmux-commands",level:3},{value:"T\u1ea1o v\xe0 qu\u1ea3n l\xfd session",id:"t\u1ea1o-v\xe0-qu\u1ea3n-l\xfd-session-1",level:4},{value:"Tmux windows v\xe0 panes",id:"tmux-windows-v\xe0-panes",level:4},{value:"5. Best practices v\xe0 l\u01b0u \xfd",id:"5-best-practices-v\xe0-l\u01b0u-\xfd",level:2},{value:"Khuy\u1ebfn ngh\u1ecb s\u1eed d\u1ee5ng",id:"khuy\u1ebfn-ngh\u1ecb-s\u1eed-d\u1ee5ng",level:3},{value:"Checklist script background",id:"checklist-script-background",level:3},{value:"Troubleshooting th\u01b0\u1eddng g\u1eb7p",id:"troubleshooting-th\u01b0\u1eddng-g\u1eb7p",level:3},{value:"K\u1ebft lu\u1eadn",id:"k\u1ebft-lu\u1eadn",level:2}];function d(n){const e={code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.h2,{id:"t\xf3m-t\u1eaft",children:"T\xf3m t\u1eaft"}),"\n",(0,c.jsx)(e.p,{children:"B\xe0i vi\u1ebft n\xe0y h\u01b0\u1edbng d\u1eabn c\xe1c c\xe1ch ch\u1ea1y script d\u01b0\u1edbi background (n\u1ec1n), qu\u1ea3n l\xfd logs c\u1ee7a script, c\xe1ch t\xecm v\xe0 t\u1eaft script \u0111ang ch\u1ea1y. \u0110\u1eb7c bi\u1ec7t h\u1eefu \xedch khi c\u1ea7n ch\u1ea1y script li\xean t\u1ee5c tr\xean server m\xe0 kh\xf4ng b\u1ecb gi\xe1n \u0111o\u1ea1n khi ng\u1eaft k\u1ebft n\u1ed1i SSH."}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"C\xe1c ph\u01b0\u01a1ng ph\xe1p \u0111\u01b0\u1ee3c \u0111\u1ec1 c\u1eadp:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["Background process v\u1edbi ",(0,c.jsx)(e.code,{children:"&"})," v\xe0 ",(0,c.jsx)(e.code,{children:"nohup"})]}),"\n",(0,c.jsxs)(e.li,{children:["Qu\u1ea3n l\xfd session v\u1edbi ",(0,c.jsx)(e.code,{children:"screen"})," v\xe0 ",(0,c.jsx)(e.code,{children:"tmux"})]}),"\n",(0,c.jsx)(e.li,{children:"Theo d\xf5i logs real-time"}),"\n",(0,c.jsx)(e.li,{children:"T\xecm v\xe0 kill processes"}),"\n"]}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.h2,{id:"1-c\xe1c-c\xe1ch-ch\u1ea1y-script-d\u01b0\u1edbi-background",children:"1. C\xe1c c\xe1ch ch\u1ea1y script d\u01b0\u1edbi background"}),"\n",(0,c.jsx)(e.h3,{id:"c\xe1ch-1-background-\u0111\u01a1n-gi\u1ea3n",children:"C\xe1ch 1: Background \u0111\u01a1n gi\u1ea3n"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"./kick_orphan_players.sh > /dev/null 2>&1 &\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"\u0110\u1eb7c \u0111i\u1ec3m:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["Ch\u1ea1y background v\u1edbi ",(0,c.jsx)(e.code,{children:"&"})]}),"\n",(0,c.jsxs)(e.li,{children:["B\u1ecf qua output (",(0,c.jsx)(e.code,{children:"> /dev/null 2>&1"}),")"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"H\u1ea1n ch\u1ebf"}),": Script s\u1ebd d\u1eebng khi logout SSH"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"c\xe1ch-2-s\u1eed-d\u1ee5ng-nohup-khuy\u1ebfn-ngh\u1ecb",children:"C\xe1ch 2: S\u1eed d\u1ee5ng nohup (khuy\u1ebfn ngh\u1ecb)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"nohup ./kick_orphan_players.sh > /dev/null 2>&1 &\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"nohup"}),": Script ti\u1ebfp t\u1ee5c ch\u1ea1y ngay c\u1ea3 khi logout SSH"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"> /dev/null"}),": Kh\xf4ng l\u01b0u output"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"2>&1"}),": Chuy\u1ec3n stderr th\xe0nh stdout (c\u0169ng v\xe0o /dev/null)"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"&"}),": Ch\u1ea1y background"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"c\xe1ch-3-l\u01b0u-pid-\u0111\u1ec3-qu\u1ea3n-l\xfd-d\u1ec5-d\xe0ng",children:"C\xe1ch 3: L\u01b0u PID \u0111\u1ec3 qu\u1ea3n l\xfd d\u1ec5 d\xe0ng"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"nohup ./kick_orphan_players.sh > /dev/null 2>&1 & echo $! > kick_script.pid\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"L\u1ee3i \xedch:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["L\u01b0u Process ID v\xe0o file ",(0,c.jsx)(e.code,{children:"kick_script.pid"})]}),"\n",(0,c.jsx)(e.li,{children:"D\u1ec5 d\xe0ng kill process sau n\xe0y"}),"\n",(0,c.jsx)(e.li,{children:"Ki\u1ec3m tra script c\xf3 \u0111ang ch\u1ea1y kh\xf4ng"}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"c\xe1ch-4-ch\u1ea1y-v\u1edbi-log-file",children:"C\xe1ch 4: Ch\u1ea1y v\u1edbi log file"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"nohup ./kick_orphan_players.sh > kick_orphan.log 2>&1 &\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"\u01afu \u0111i\u1ec3m:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"L\u01b0u to\xe0n b\u1ed9 output v\xe0o file log"}),"\n",(0,c.jsx)(e.li,{children:"C\xf3 th\u1ec3 debug khi c\u1ea7n"}),"\n",(0,c.jsx)(e.li,{children:"Theo d\xf5i ho\u1ea1t \u0111\u1ed9ng c\u1ee7a script"}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"c\xe1ch-5-s\u1eed-d\u1ee5ng-screen",children:"C\xe1ch 5: S\u1eed d\u1ee5ng screen"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# T\u1ea1o screen session\r\nscreen -dmS kick_orphan ./kick_orphan_players.sh\r\n\r\n# Ho\u1eb7c t\u1ea1o session r\u1ed3i ch\u1ea1y script\r\nscreen -S kick_orphan\r\n./kick_orphan_players.sh\r\n# Nh\u1ea5n Ctrl+A, sau \u0111\xf3 D \u0111\u1ec3 detach\n"})}),"\n",(0,c.jsx)(e.h3,{id:"c\xe1ch-6-s\u1eed-d\u1ee5ng-tmux",children:"C\xe1ch 6: S\u1eed d\u1ee5ng tmux"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# T\u1ea1o tmux session v\xe0 ch\u1ea1y script\r\ntmux new-session -d -s kick_orphan './kick_orphan_players.sh'\r\n\r\n# Ho\u1eb7c t\u1ea1o session th\u1ee7 c\xf4ng\r\ntmux new-session -s kick_orphan\r\n./kick_orphan_players.sh\r\n# Nh\u1ea5n Ctrl+B, sau \u0111\xf3 D \u0111\u1ec3 detach\n"})}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.h2,{id:"2-qu\u1ea3n-l\xfd-v\xe0-theo-d\xf5i-logs",children:"2. Qu\u1ea3n l\xfd v\xe0 theo d\xf5i logs"}),"\n",(0,c.jsx)(e.h3,{id:"ch\u1ea1y-script-v\u1edbi-log-file",children:"Ch\u1ea1y script v\u1edbi log file"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"nohup ./kick_orphan_players.sh > kick_orphan.log 2>&1 &\n"})}),"\n",(0,c.jsx)(e.h3,{id:"xem-logs-theo-nhi\u1ec1u-c\xe1ch",children:"Xem logs theo nhi\u1ec1u c\xe1ch"}),"\n",(0,c.jsx)(e.h4,{id:"xem-to\xe0n-b\u1ed9-log",children:"Xem to\xe0n b\u1ed9 log"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"cat kick_orphan.log\n"})}),"\n",(0,c.jsx)(e.h4,{id:"xem-log-real-time-khuy\u1ebfn-ngh\u1ecb",children:"Xem log real-time (khuy\u1ebfn ngh\u1ecb)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"tail -f kick_orphan.log\n"})}),"\n",(0,c.jsx)(e.h4,{id:"xem-n-d\xf2ng-cu\u1ed1i-c\xf9ng",children:"Xem n d\xf2ng cu\u1ed1i c\xf9ng"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Xem 20 d\xf2ng cu\u1ed1i\r\ntail -20 kick_orphan.log\r\n\r\n# Xem 50 d\xf2ng cu\u1ed1i\r\ntail -50 kick_orphan.log\n"})}),"\n",(0,c.jsx)(e.h4,{id:"xem-log-v\u1edbi-timestamps",children:"Xem log v\u1edbi timestamps"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'# Th\xeam timestamp v\xe0o script\r\necho "$(date): Script started" >> kick_orphan.log\r\n./kick_orphan_players.sh >> kick_orphan.log 2>&1\n'})}),"\n",(0,c.jsx)(e.h4,{id:"s\u1eed-d\u1ee5ng-tee-\u0111\u1ec3-v\u1eeba-xem-v\u1eeba-l\u01b0u",children:"S\u1eed d\u1ee5ng tee \u0111\u1ec3 v\u1eeba xem v\u1eeba l\u01b0u"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"nohup ./kick_orphan_players.sh 2>&1 | tee kick_orphan.log &\n"})}),"\n",(0,c.jsx)(e.h3,{id:"rotate-logs-tr\xe1nh-file-qu\xe1-l\u1edbn",children:"Rotate logs (tr\xe1nh file qu\xe1 l\u1edbn)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Backup log c\u0169\r\nmv kick_orphan.log kick_orphan.log.$(date +%Y%m%d_%H%M%S)\r\n\r\n# Ho\u1eb7c s\u1eed d\u1ee5ng logrotate\r\nsudo nano /etc/logrotate.d/kick_orphan\n"})}),"\n",(0,c.jsx)(e.p,{children:"N\u1ed9i dung file logrotate:"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"/path/to/kick_orphan.log {\r\n    daily\r\n    rotate 7\r\n    compress\r\n    missingok\r\n    notifempty\r\n}\n"})}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.h2,{id:"3-t\xecm-v\xe0-qu\u1ea3n-l\xfd-background-processes",children:"3. T\xecm v\xe0 qu\u1ea3n l\xfd background processes"}),"\n",(0,c.jsx)(e.h3,{id:"ki\u1ec3m-tra-process-\u0111ang-ch\u1ea1y",children:"Ki\u1ec3m tra process \u0111ang ch\u1ea1y"}),"\n",(0,c.jsx)(e.h4,{id:"t\xecm-theo-t\xean-script",children:"T\xecm theo t\xean script"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"ps aux | grep kick_orphan_players\n"})}),"\n",(0,c.jsx)(e.h4,{id:"t\xecm-theo-t\xean-process-chi-ti\u1ebft-h\u01a1n",children:"T\xecm theo t\xean process chi ti\u1ebft h\u01a1n"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"ps aux | grep -v grep | grep kick_orphan\n"})}),"\n",(0,c.jsx)(e.h4,{id:"s\u1eed-d\u1ee5ng-pgrep-g\u1ecdn-h\u01a1n",children:"S\u1eed d\u1ee5ng pgrep (g\u1ecdn h\u01a1n)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"pgrep -f kick_orphan_players.sh\n"})}),"\n",(0,c.jsx)(e.h4,{id:"hi\u1ec3n-th\u1ecb-process-tree",children:"Hi\u1ec3n th\u1ecb process tree"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"pstree -p | grep kick_orphan\n"})}),"\n",(0,c.jsx)(e.h3,{id:"kill-processes",children:"Kill processes"}),"\n",(0,c.jsx)(e.h4,{id:"kill-b\u1eb1ng-pid-file-n\u1ebfu-\u0111\xe3-l\u01b0u",children:"Kill b\u1eb1ng PID file (n\u1ebfu \u0111\xe3 l\u01b0u)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"kill $(cat kick_script.pid)\n"})}),"\n",(0,c.jsx)(e.h4,{id:"kill-b\u1eb1ng-t\xean-process",children:"Kill b\u1eb1ng t\xean process"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"pkill -f kick_orphan_players.sh\n"})}),"\n",(0,c.jsx)(e.h4,{id:"force-kill-n\u1ebfu-c\u1ea7n",children:"Force kill n\u1ebfu c\u1ea7n"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"pkill -9 -f kick_orphan_players.sh\n"})}),"\n",(0,c.jsx)(e.h4,{id:"kill-t\u1ea5t-c\u1ea3-processes-li\xean-quan",children:"Kill t\u1ea5t c\u1ea3 processes li\xean quan"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"killall kick_orphan_players.sh\n"})}),"\n",(0,c.jsx)(e.h3,{id:"ki\u1ec3m-tra-process-c\xf3-ch\u1ea1y-kh\xf4ng",children:"Ki\u1ec3m tra process c\xf3 ch\u1ea1y kh\xf4ng"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'# Ki\u1ec3m tra b\u1eb1ng PID file\r\nif [ -f kick_script.pid ] && kill -0 $(cat kick_script.pid) 2>/dev/null; then\r\n    echo "Script \u0111ang ch\u1ea1y"\r\nelse\r\n    echo "Script kh\xf4ng ch\u1ea1y"\r\nfi\n'})}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.h2,{id:"4-qu\u1ea3n-l\xfd-session-v\u1edbi-screen-v\xe0-tmux",children:"4. Qu\u1ea3n l\xfd session v\u1edbi screen v\xe0 tmux"}),"\n",(0,c.jsx)(e.h3,{id:"screen-commands",children:"Screen commands"}),"\n",(0,c.jsx)(e.h4,{id:"t\u1ea1o-v\xe0-qu\u1ea3n-l\xfd-session",children:"T\u1ea1o v\xe0 qu\u1ea3n l\xfd session"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# T\u1ea1o session m\u1edbi\r\nscreen -S kick_orphan\r\n\r\n# List t\u1ea5t c\u1ea3 sessions\r\nscreen -ls\r\n\r\n# Attach v\xe0o session\r\nscreen -r kick_orphan\r\n\r\n# Detach kh\u1ecfi session: Ctrl+A + D\r\n\r\n# Kill session\r\nscreen -X -S kick_orphan quit\n"})}),"\n",(0,c.jsx)(e.h4,{id:"screen-trong-ch\u1ebf-\u0111\u1ed9-daemon",children:"Screen trong ch\u1ebf \u0111\u1ed9 daemon"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Ch\u1ea1y script ngay trong background\r\nscreen -dmS kick_orphan ./kick_orphan_players.sh\r\n\r\n# Attach \u0111\u1ec3 xem output\r\nscreen -r kick_orphan\n"})}),"\n",(0,c.jsx)(e.h3,{id:"tmux-commands",children:"Tmux commands"}),"\n",(0,c.jsx)(e.h4,{id:"t\u1ea1o-v\xe0-qu\u1ea3n-l\xfd-session-1",children:"T\u1ea1o v\xe0 qu\u1ea3n l\xfd session"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# T\u1ea1o session m\u1edbi\r\ntmux new-session -s kick_orphan\r\n\r\n# List sessions\r\ntmux list-sessions\r\n\r\n# Attach v\xe0o session\r\ntmux attach-session -t kick_orphan\r\n\r\n# Detach: Ctrl+B + D\r\n\r\n# Kill session\r\ntmux kill-session -t kick_orphan\n"})}),"\n",(0,c.jsx)(e.h4,{id:"tmux-windows-v\xe0-panes",children:"Tmux windows v\xe0 panes"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:'# T\u1ea1o window m\u1edbi: Ctrl+B + C\r\n# Chuy\u1ec3n window: Ctrl+B + 0,1,2...\r\n# Split pane ngang: Ctrl+B + "\r\n# Split pane d\u1ecdc: Ctrl+B + %\n'})}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.h2,{id:"5-best-practices-v\xe0-l\u01b0u-\xfd",children:"5. Best practices v\xe0 l\u01b0u \xfd"}),"\n",(0,c.jsx)(e.h3,{id:"khuy\u1ebfn-ngh\u1ecb-s\u1eed-d\u1ee5ng",children:"Khuy\u1ebfn ngh\u1ecb s\u1eed d\u1ee5ng"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Ph\u01b0\u01a1ng ph\xe1p t\u1ed1t nh\u1ea5t cho production\r\nnohup ./kick_orphan_players.sh > kick_orphan.log 2>&1 &\r\n\r\n# Theo d\xf5i real-time\r\ntail -f kick_orphan.log\n"})}),"\n",(0,c.jsx)(e.h3,{id:"checklist-script-background",children:"Checklist script background"}),"\n",(0,c.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,c.jsxs)(e.li,{className:"task-list-item",children:[(0,c.jsx)(e.input,{type:"checkbox",disabled:!0})," ","S\u1eed d\u1ee5ng ",(0,c.jsx)(e.code,{children:"nohup"})," \u0111\u1ec3 script kh\xf4ng b\u1ecb kill khi logout"]}),"\n",(0,c.jsxs)(e.li,{className:"task-list-item",children:[(0,c.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Redirect output \u0111\u1ec3 tr\xe1nh session hang (",(0,c.jsx)(e.code,{children:"> file.log 2>&1"}),")"]}),"\n",(0,c.jsxs)(e.li,{className:"task-list-item",children:[(0,c.jsx)(e.input,{type:"checkbox",disabled:!0})," ","L\u01b0u PID \u0111\u1ec3 d\u1ec5 qu\u1ea3n l\xfd (",(0,c.jsx)(e.code,{children:"echo $! > script.pid"}),")"]}),"\n",(0,c.jsxs)(e.li,{className:"task-list-item",children:[(0,c.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Thi\u1ebft l\u1eadp log rotation \u0111\u1ec3 tr\xe1nh file qu\xe1 l\u1edbn"]}),"\n",(0,c.jsxs)(e.li,{className:"task-list-item",children:[(0,c.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Test script tr\u01b0\u1edbc khi ch\u1ea1y production"]}),"\n",(0,c.jsxs)(e.li,{className:"task-list-item",children:[(0,c.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Monitor script \u0111\u1ecbnh k\u1ef3"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"troubleshooting-th\u01b0\u1eddng-g\u1eb7p",children:"Troubleshooting th\u01b0\u1eddng g\u1eb7p"}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Script b\u1ecb kill khi logout SSH:"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# S\u1eed d\u1ee5ng nohup\r\nnohup ./script.sh &\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Kh\xf4ng th\u1ec3 kill script:"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Force kill\r\npkill -9 -f script_name.sh\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Log file qu\xe1 l\u1edbn:"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Truncate log file\r\n> kick_orphan.log\r\n# Ho\u1eb7c rotate\r\nmv kick_orphan.log kick_orphan.log.backup\n"})}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Script ch\u1ea1y nhi\u1ec1u instance:"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# Ki\u1ec3m tra tr\u01b0\u1edbc khi start\r\npgrep -f script_name.sh || nohup ./script_name.sh &\n"})}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.h2,{id:"k\u1ebft-lu\u1eadn",children:"K\u1ebft lu\u1eadn"}),"\n",(0,c.jsx)(e.p,{children:"Ch\u1ea1y script d\u01b0\u1edbi background l\xe0 k\u1ef9 n\u0103ng quan tr\u1ecdng trong qu\u1ea3n tr\u1ecb Linux. T\xf9y v\xe0o m\u1ee5c \u0111\xedch s\u1eed d\u1ee5ng:"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Development/Testing"}),": S\u1eed d\u1ee5ng ",(0,c.jsx)(e.code,{children:"screen"})," ho\u1eb7c ",(0,c.jsx)(e.code,{children:"tmux"})," \u0111\u1ec3 d\u1ec5 debug"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Production"}),": S\u1eed d\u1ee5ng ",(0,c.jsx)(e.code,{children:"nohup"})," v\u1edbi logging \u0111\u1ea7y \u0111\u1ee7"]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"L\u1ec7nh khuy\u1ebfn ngh\u1ecb:"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"nohup ./script.sh > script.log 2>&1 & echo $! > script.pid\n"})}),"\n",(0,c.jsx)(e.p,{children:"C\xe1ch n\xe0y \u0111\u1ea3m b\u1ea3o script ch\u1ea1y b\u1ec1n v\u1eefng, c\xf3 logs \u0111\u1ec3 debug v\xe0 d\u1ec5 d\xe0ng qu\u1ea3n l\xfd process."})]})}function a(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}}}]);