"use strict";(self.webpackChunkviethungle_0503=self.webpackChunkviethungle_0503||[]).push([[4563],{1500:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>h,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"tutorials/supabase_cloudflare_tunnel_guide","title":"C\u1ea5u h\xecnh Cloudflare Tunnel cho Supabase Self-hosted","description":"1. T\u1ed5ng quan","source":"@site/docs/tutorials/supabase_cloudflare_tunnel_guide.md","sourceDirName":"tutorials","slug":"/tutorials/supabase_cloudflare_tunnel_guide","permalink":"/viethungle/docs/tutorials/supabase_cloudflare_tunnel_guide","draft":false,"unlisted":false,"editUrl":"https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/supabase_cloudflare_tunnel_guide.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17},"sidebar":"tutorialSidebar","previous":{"title":"Qu\u1ea3n l\xfd phi\xean b\u1ea3n Java v\xe0 JVM","permalink":"/viethungle/docs/tutorials/java_version_management"},"next":{"title":"Ubuntu ch\u1ec9 th\u1ea5y 20 GB (fix)","permalink":"/viethungle/docs/tutorials/viettelidc-chi-thay-20gb"}}');var c=s(4848),i=s(8453);const r={sidebar_position:17},h="C\u1ea5u h\xecnh Cloudflare Tunnel cho Supabase Self-hosted",t={},d=[{value:"1. T\u1ed5ng quan",id:"1-t\u1ed5ng-quan",level:2},{value:"1.1. L\u1ee3i \xedch c\u1ee7a Cloudflare Tunnel",id:"11-l\u1ee3i-\xedch-c\u1ee7a-cloudflare-tunnel",level:3},{value:"1.2. Ki\u1ebfn tr\xfac h\u1ec7 th\u1ed1ng",id:"12-ki\u1ebfn-tr\xfac-h\u1ec7-th\u1ed1ng",level:3},{value:"2. Y\xeau c\u1ea7u tr\u01b0\u1edbc khi b\u1eaft \u0111\u1ea7u",id:"2-y\xeau-c\u1ea7u-tr\u01b0\u1edbc-khi-b\u1eaft-\u0111\u1ea7u",level:2},{value:"3. T\u1ea1o Cloudflare Tunnel",id:"3-t\u1ea1o-cloudflare-tunnel",level:2},{value:"3.1. Truy c\u1eadp Zero Trust Dashboard",id:"31-truy-c\u1eadp-zero-trust-dashboard",level:3},{value:"3.2. C\u1ea5u h\xecnh Tunnel",id:"32-c\u1ea5u-h\xecnh-tunnel",level:3},{value:"4. Th\xeam Cloudflared v\xe0o Docker Compose",id:"4-th\xeam-cloudflared-v\xe0o-docker-compose",level:2},{value:"4.1. Ch\u1ec9nh s\u1eeda docker-compose.yml",id:"41-ch\u1ec9nh-s\u1eeda-docker-composeyml",level:3},{value:"4.2. Kh\u1edfi \u0111\u1ed9ng l\u1ea1i containers",id:"42-kh\u1edfi-\u0111\u1ed9ng-l\u1ea1i-containers",level:3},{value:"5. C\u1ea5u h\xecnh Public Hostnames",id:"5-c\u1ea5u-h\xecnh-public-hostnames",level:2},{value:"5.1. Truy c\u1eadp tab Public Hostnames",id:"51-truy-c\u1eadp-tab-public-hostnames",level:3},{value:"5.2. Th\xeam hostname cho Supabase Studio",id:"52-th\xeam-hostname-cho-supabase-studio",level:3},{value:"5.3. Th\xeam hostname cho Supabase API",id:"53-th\xeam-hostname-cho-supabase-api",level:3},{value:"7. C\u1eadp nh\u1eadt c\u1ea5u h\xecnh Supabase",id:"7-c\u1eadp-nh\u1eadt-c\u1ea5u-h\xecnh-supabase",level:2},{value:"7.1. Ch\u1ec9nh s\u1eeda file .env",id:"71-ch\u1ec9nh-s\u1eeda-file-env",level:3},{value:"7.2. \xdd ngh\u0129a c\xe1c bi\u1ebfn m\xf4i tr\u01b0\u1eddng",id:"72-\xfd-ngh\u0129a-c\xe1c-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng",level:3},{value:"7.3. Kh\u1edfi \u0111\u1ed9ng l\u1ea1i services",id:"73-kh\u1edfi-\u0111\u1ed9ng-l\u1ea1i-services",level:3},{value:"8. Ki\u1ec3m tra k\u1ebft n\u1ed1i",id:"8-ki\u1ec3m-tra-k\u1ebft-n\u1ed1i",level:2},{value:"8.1. Test c\xe1c endpoints",id:"81-test-c\xe1c-endpoints",level:3},{value:"8.2. Troubleshooting th\u01b0\u1eddng g\u1eb7p",id:"82-troubleshooting-th\u01b0\u1eddng-g\u1eb7p",level:3},{value:"9. K\u1ebft lu\u1eadn",id:"9-k\u1ebft-lu\u1eadn",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"c\u1ea5u-h\xecnh-cloudflare-tunnel-cho-supabase-self-hosted",children:"C\u1ea5u h\xecnh Cloudflare Tunnel cho Supabase Self-hosted"})}),"\n",(0,c.jsx)(e.h2,{id:"1-t\u1ed5ng-quan",children:"1. T\u1ed5ng quan"}),"\n",(0,c.jsx)(e.p,{children:"Khi self-host Supabase, vi\u1ec7c c\u1ea5u h\xecnh HTTPS v\u1edbi domain t\xf9y ch\u1ec9nh th\u01b0\u1eddng g\u1eb7p kh\xf3 kh\u0103n do c\u1ea7n thi\u1ebft l\u1eadp SSL certificate v\xe0 reverse proxy. Cloudflare Tunnel cung c\u1ea5p m\u1ed9t gi\u1ea3i ph\xe1p \u0111\u01a1n gi\u1ea3n, cho ph\xe9p truy c\u1eadp Supabase qua HTTPS m\xe0 kh\xf4ng c\u1ea7n c\u1ea5u h\xecnh ph\u1ee9c t\u1ea1p."}),"\n",(0,c.jsx)(e.h3,{id:"11-l\u1ee3i-\xedch-c\u1ee7a-cloudflare-tunnel",children:"1.1. L\u1ee3i \xedch c\u1ee7a Cloudflare Tunnel"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"T\u1ef1 \u0111\u1ed9ng c\xf3 HTTPS"})," qua Cloudflare"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Kh\xf4ng c\u1ea7n qu\u1ea3n l\xfd SSL certificate"})," th\u1ee7 c\xf4ng"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"B\u1ea3o m\u1eadt cao"})," v\u1edbi kh\u1ea3 n\u0103ng gi\u1edbi h\u1ea1n truy c\u1eadp"]}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.strong,{children:"D\u1ec5 d\xe0ng setup v\xe0 maintain"})}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"12-ki\u1ebfn-tr\xfac-h\u1ec7-th\u1ed1ng",children:"1.2. Ki\u1ebfn tr\xfac h\u1ec7 th\u1ed1ng"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"User \u2192 Cloudflare \u2192 Tunnel \u2192 Docker Network \u2192 Supabase Services\n"})}),"\n",(0,c.jsx)(e.h2,{id:"2-y\xeau-c\u1ea7u-tr\u01b0\u1edbc-khi-b\u1eaft-\u0111\u1ea7u",children:"2. Y\xeau c\u1ea7u tr\u01b0\u1edbc khi b\u1eaft \u0111\u1ea7u"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"Supabase \u0111\xe3 \u0111\u01b0\u1ee3c c\xe0i \u0111\u1eb7t v\xe0 ch\u1ea1y b\u1eb1ng Docker"}),"\n",(0,c.jsx)(e.li,{children:"Domain \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o Cloudflare"}),"\n",(0,c.jsx)(e.li,{children:"Truy c\u1eadp v\xe0o Cloudflare Zero Trust Dashboard"}),"\n",(0,c.jsx)(e.li,{children:"Docker v\xe0 Docker Compose \u0111\xe3 c\xe0i \u0111\u1eb7t"}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"3-t\u1ea1o-cloudflare-tunnel",children:"3. T\u1ea1o Cloudflare Tunnel"}),"\n",(0,c.jsx)(e.h3,{id:"31-truy-c\u1eadp-zero-trust-dashboard",children:"3.1. Truy c\u1eadp Zero Trust Dashboard"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsx)(e.li,{children:"\u0110\u0103ng nh\u1eadp v\xe0o Cloudflare Dashboard"}),"\n",(0,c.jsxs)(e.li,{children:["Chuy\u1ec3n \u0111\u1ebfn ",(0,c.jsx)(e.strong,{children:"Zero Trust"})," \u2192 ",(0,c.jsx)(e.strong,{children:"Networks"})," \u2192 ",(0,c.jsx)(e.strong,{children:"Tunnels"})]}),"\n",(0,c.jsxs)(e.li,{children:["Click ",(0,c.jsx)(e.strong,{children:'"Create a tunnel"'})]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"32-c\u1ea5u-h\xecnh-tunnel",children:"3.2. C\u1ea5u h\xecnh Tunnel"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["Ch\u1ecdn ",(0,c.jsx)(e.strong,{children:'"Cloudflared"'})," \u2192 Next"]}),"\n",(0,c.jsxs)(e.li,{children:["\u0110\u1eb7t t\xean tunnel (v\xed d\u1ee5: ",(0,c.jsx)(e.code,{children:"supabase-tunnel"}),")"]}),"\n",(0,c.jsxs)(e.li,{children:["Click ",(0,c.jsx)(e.strong,{children:'"Save tunnel"'})]}),"\n",(0,c.jsxs)(e.li,{children:["Trong tab ",(0,c.jsx)(e.strong,{children:'"Install and run a connector"'}),", ch\u1ecdn ",(0,c.jsx)(e.strong,{children:"Docker"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Copy token"})," t\u1eeb l\u1ec7nh Docker \u0111\u01b0\u1ee3c generate (ph\u1ea7n sau ",(0,c.jsx)(e.code,{children:"--token"}),")"]}),"\n"]}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"L\u01b0u \xfd:"})," Token n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong b\u01b0\u1edbc ti\u1ebfp theo."]}),"\n",(0,c.jsx)(e.h2,{id:"4-th\xeam-cloudflared-v\xe0o-docker-compose",children:"4. Th\xeam Cloudflared v\xe0o Docker Compose"}),"\n",(0,c.jsx)(e.h3,{id:"41-ch\u1ec9nh-s\u1eeda-docker-composeyml",children:"4.1. Ch\u1ec9nh s\u1eeda docker-compose.yml"}),"\n",(0,c.jsxs)(e.p,{children:["Th\xeam service cloudflared v\xe0o file ",(0,c.jsx)(e.code,{children:"docker-compose.yml"})," c\u1ee7a Supabase:"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-yaml",children:"services:\n  # ... c\xe1c services kh\xe1c c\u1ee7a Supabase\n\n  cloudflared:\n    container_name: supabase-cloudflared\n    image: cloudflare/cloudflared:latest\n    restart: unless-stopped\n    command: tunnel --no-autoupdate run --token YOUR_TUNNEL_TOKEN_HERE\n    networks:\n      - default\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsxs)(e.strong,{children:["Thay ",(0,c.jsx)(e.code,{children:"YOUR_TUNNEL_TOKEN_HERE"})]})," b\u1eb1ng token \u0111\xe3 copy t\u1eeb b\u01b0\u1edbc 3.2."]}),"\n",(0,c.jsx)(e.h3,{id:"42-kh\u1edfi-\u0111\u1ed9ng-l\u1ea1i-containers",children:"4.2. Kh\u1edfi \u0111\u1ed9ng l\u1ea1i containers"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"cd supabase-project\ndocker compose down\ndocker compose up -d\n"})}),"\n",(0,c.jsx)(e.h2,{id:"5-c\u1ea5u-h\xecnh-public-hostnames",children:"5. C\u1ea5u h\xecnh Public Hostnames"}),"\n",(0,c.jsx)(e.h3,{id:"51-truy-c\u1eadp-tab-public-hostnames",children:"5.1. Truy c\u1eadp tab Public Hostnames"}),"\n",(0,c.jsxs)(e.p,{children:["Quay l\u1ea1i Cloudflare Zero Trust Dashboard, v\xe0o tunnel v\u1eeba t\u1ea1o v\xe0 chuy\u1ec3n \u0111\u1ebfn tab ",(0,c.jsx)(e.strong,{children:'"Public Hostnames"'}),"."]}),"\n",(0,c.jsx)(e.h3,{id:"52-th\xeam-hostname-cho-supabase-studio",children:"5.2. Th\xeam hostname cho Supabase Studio"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["Click ",(0,c.jsx)(e.strong,{children:'"Add a public hostname"'})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Subdomain:"})," ",(0,c.jsx)(e.code,{children:"supabase"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Domain:"})," ",(0,c.jsx)(e.code,{children:"rtrobotics.tech"})," (thay b\u1eb1ng domain c\u1ee7a b\u1ea1n)"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Service Type:"})," ",(0,c.jsx)(e.code,{children:"HTTP"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"URL:"})," ",(0,c.jsx)(e.code,{children:"studio:3000"})]}),"\n",(0,c.jsxs)(e.li,{children:["Click ",(0,c.jsx)(e.strong,{children:'"Save hostname"'})]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"53-th\xeam-hostname-cho-supabase-api",children:"5.3. Th\xeam hostname cho Supabase API"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["Click ",(0,c.jsx)(e.strong,{children:'"Add a public hostname"'})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Subdomain:"})," ",(0,c.jsx)(e.code,{children:"api"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Domain:"})," ",(0,c.jsx)(e.code,{children:"rtrobotics.tech"})," (thay b\u1eb1ng domain c\u1ee7a b\u1ea1n)"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Service Type:"})," ",(0,c.jsx)(e.code,{children:"HTTP"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"URL:"})," ",(0,c.jsx)(e.code,{children:"kong:8000"})]}),"\n",(0,c.jsxs)(e.li,{children:["Click ",(0,c.jsx)(e.strong,{children:'"Save hostname"'})]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"Cloudflare s\u1ebd t\u1ef1 \u0111\u1ed9ng th\xeam c\xe1c CNAME records t\u01b0\u01a1ng \u1ee9ng trong DNS Records v\u1edbi \u0111\u1ecbnh d\u1ea1ng nh\u01b0 sau:"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Record 1:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["Type: ",(0,c.jsx)(e.code,{children:"CNAME"})]}),"\n",(0,c.jsxs)(e.li,{children:["Name: ",(0,c.jsx)(e.code,{children:"supabase"})]}),"\n",(0,c.jsxs)(e.li,{children:["Target: ",(0,c.jsx)(e.code,{children:"YOUR_TUNNEL_ID.cfargotunnel.com"})]}),"\n",(0,c.jsxs)(e.li,{children:["Proxy status: ",(0,c.jsx)(e.strong,{children:"Proxied (Orange cloud)"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Record 2:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["Type: ",(0,c.jsx)(e.code,{children:"CNAME"})]}),"\n",(0,c.jsxs)(e.li,{children:["Name: ",(0,c.jsx)(e.code,{children:"api"})]}),"\n",(0,c.jsxs)(e.li,{children:["Target: ",(0,c.jsx)(e.code,{children:"YOUR_TUNNEL_ID.cfargotunnel.com"})]}),"\n",(0,c.jsxs)(e.li,{children:["Proxy status: ",(0,c.jsx)(e.strong,{children:"Proxied (Orange cloud)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"L\u01b0u \xfd:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"YOUR_TUNNEL_ID"})," c\xf3 th\u1ec3 t\xecm th\u1ea5y trong URL tunnel ho\u1eb7c trong dashboard."]}),"\n",(0,c.jsxs)(e.li,{children:["S\u1eed d\u1ee5ng t\xean service Docker (",(0,c.jsx)(e.code,{children:"studio"}),", ",(0,c.jsx)(e.code,{children:"kong"}),") thay v\xec ",(0,c.jsx)(e.code,{children:"localhost"})," \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o connectivity trong Docker network."]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"7-c\u1eadp-nh\u1eadt-c\u1ea5u-h\xecnh-supabase",children:"7. C\u1eadp nh\u1eadt c\u1ea5u h\xecnh Supabase"}),"\n",(0,c.jsx)(e.h3,{id:"71-ch\u1ec9nh-s\u1eeda-file-env",children:"7.1. Ch\u1ec9nh s\u1eeda file .env"}),"\n",(0,c.jsxs)(e.p,{children:["C\u1eadp nh\u1eadt c\xe1c bi\u1ebfn m\xf4i tr\u01b0\u1eddng trong file ",(0,c.jsx)(e.code,{children:".env"})," c\u1ee7a Supabase:"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"# URL cho API endpoints (Kong gateway)\nAPI_EXTERNAL_URL=https://api.rtrobotics.tech\n\n# URL cho Supabase Studio dashboard  \nSUPABASE_PUBLIC_URL=https://supabase.rtrobotics.tech\n\n# Base URL c\u1ee7a site (d\xf9ng cho auth redirects)\nSITE_URL=https://supabase.rtrobotics.tech\nURI_ALLOW_LIST=https://supabase.rtrobotics.tech\n"})}),"\n",(0,c.jsx)(e.p,{children:"Xem th\xeam docs c\u1ee7a Supabase d\xe0nh cho t\u1eebng front-end framwork:"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.a,{href:"https://supabase.com/docs/guides/auth/server-side",children:"https://supabase.com/docs/guides/auth/server-side"})}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.a,{href:"https://github.com/supabase/auth",children:"https://github.com/supabase/auth"})}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"72-\xfd-ngh\u0129a-c\xe1c-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng",children:"7.2. \xdd ngh\u0129a c\xe1c bi\u1ebfn m\xf4i tr\u01b0\u1eddng"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:(0,c.jsx)(e.code,{children:"API_EXTERNAL_URL"})}),": URL m\xe0 GoTrue (Auth service) s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea1o links trong email x\xe1c th\u1ef1c v\xe0 c\xe1c API calls. \u0110\xe2y l\xe0 URL m\xe0 client applications s\u1ebd s\u1eed d\u1ee5ng \u0111\u1ec3 k\u1ebft n\u1ed1i v\u1edbi Supabase API."]}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:(0,c.jsx)(e.code,{children:"SUPABASE_PUBLIC_URL"})}),": URL \u0111\u1ec3 truy c\u1eadp Supabase Studio dashboard."]}),"\n"]}),"\n",(0,c.jsxs)(e.li,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:(0,c.jsx)(e.code,{children:"SITE_URL"})}),": URL c\u01a1 s\u1edf c\u1ee7a website/application, \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\xe0m allow-list cho redirects v\xe0 \u0111\u1ec3 t\u1ea1o URLs trong emails."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"73-kh\u1edfi-\u0111\u1ed9ng-l\u1ea1i-services",children:"7.3. Kh\u1edfi \u0111\u1ed9ng l\u1ea1i services"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"docker compose down\ndocker compose up -d\n"})}),"\n",(0,c.jsx)(e.h2,{id:"8-ki\u1ec3m-tra-k\u1ebft-n\u1ed1i",children:"8. Ki\u1ec3m tra k\u1ebft n\u1ed1i"}),"\n",(0,c.jsx)(e.h3,{id:"81-test-c\xe1c-endpoints",children:"8.1. Test c\xe1c endpoints"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Supabase Studio:"})," ",(0,c.jsx)(e.code,{children:"https://supabase.rtrobotics.tech"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"API Health Check:"})," ",(0,c.jsx)(e.code,{children:"https://api.rtrobotics.tech/rest/v1/"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Auth endpoint:"})," ",(0,c.jsx)(e.code,{children:"https://api.rtrobotics.tech/auth/v1/"})]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"82-troubleshooting-th\u01b0\u1eddng-g\u1eb7p",children:"8.2. Troubleshooting th\u01b0\u1eddng g\u1eb7p"}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"L\u1ed7i 502 Bad Gateway:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"Ki\u1ec3m tra container cloudflared c\xf3 \u0111ang ch\u1ea1y kh\xf4ng"}),"\n",(0,c.jsxs)(e.li,{children:["\u0110\u1ea3m b\u1ea3o service names (",(0,c.jsx)(e.code,{children:"studio:3000"}),", ",(0,c.jsx)(e.code,{children:"kong:8000"}),") \u0111\xfang trong tunnel config"]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Kh\xf4ng th\u1ec3 truy c\u1eadp:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"Ki\u1ec3m tra DNS propagation (c\xf3 th\u1ec3 m\u1ea5t 5-10 ph\xfat)"}),"\n",(0,c.jsx)(e.li,{children:"X\xe1c nh\u1eadn CNAME records \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o v\xe0 proxied"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.strong,{children:"Auth kh\xf4ng ho\u1ea1t \u0111\u1ed9ng:"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:["Ki\u1ec3m tra ",(0,c.jsx)(e.code,{children:"API_EXTERNAL_URL"})," \u0111\xe3 \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh \u0111\xfang trong ",(0,c.jsx)(e.code,{children:".env"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u0110\u1ea3m b\u1ea3o ",(0,c.jsx)(e.code,{children:"SITE_URL"})," match v\u1edbi domain \u0111ang s\u1eed d\u1ee5ng"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"9-k\u1ebft-lu\u1eadn",children:"9. K\u1ebft lu\u1eadn"}),"\n",(0,c.jsx)(e.p,{children:"Cloudflare Tunnel cung c\u1ea5p m\u1ed9t gi\u1ea3i ph\xe1p elegant \u0111\u1ec3 expose Supabase self-hosted ra internet v\u1edbi HTTPS. Ph\u01b0\u01a1ng ph\xe1p n\xe0y \u0111\u1eb7c bi\u1ec7t ph\xf9 h\u1ee3p cho:"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Development environments"})," c\u1ea7n truy c\u1eadp t\u1eeb xa"]}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.strong,{children:"Small to medium production deployments"})}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Prototyping"})," v\xe0 testing"]}),"\n",(0,c.jsxs)(e.li,{children:["C\xe1c tr\u01b0\u1eddng h\u1ee3p c\u1ea7n ",(0,c.jsx)(e.strong,{children:"setup nhanh"})," m\xe0 kh\xf4ng mu\u1ed1n qu\u1ea3n l\xfd infrastructure ph\u1ee9c t\u1ea1p"]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"V\u1edbi c\xe1ch ti\u1ebfp c\u1eadn n\xe0y, b\u1ea1n c\xf3 th\u1ec3 c\xf3 \u0111\u01b0\u1ee3c m\u1ed9t Supabase instance an to\xe0n, c\xf3 HTTPS v\xe0 d\u1ec5 d\xe0ng truy c\u1eadp ch\u1ec9 trong v\xe0i ph\xfat setup."})]})}function a(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(o,{...n})}):o(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>h});var l=s(6540);const c={},i=l.createContext(c);function r(n){const e=l.useContext(i);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function h(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:r(n.components),l.createElement(i.Provider,{value:e},n.children)}}}]);