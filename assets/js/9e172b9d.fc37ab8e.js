"use strict";(self.webpackChunkviethungle_0503=self.webpackChunkviethungle_0503||[]).push([[3338],{6632:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tutorials/gpg4win-backup-restore-private-key","title":"Backup v\xe0 Restore Private Key GPG tr\xean Windows v\u1edbi GPG4win","description":"Khi l\xe0m vi\u1ec7c v\u1edbi GPG key signing tr\xean Windows, vi\u1ec7c backup v\xe0 restore private key l\xe0 r\u1ea5t quan tr\u1ecdng \u0111\u1ec3 kh\xf4ng m\u1ea5t kh\u1ea3 n\u0103ng k\xfd commit ho\u1eb7c gi\u1ea3i m\xe3 d\u1eef li\u1ec7u. B\xe0i vi\u1ebft n\xe0y h\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1ch x\u1eed l\xfd l\u1ed7i \\"No secret key\\" v\xe0 backup/restore private key \u0111\xfang c\xe1ch.","source":"@site/docs/tutorials/gpg4win-backup-restore-private-key.md","sourceDirName":"tutorials","slug":"/tutorials/gpg4win-backup-restore-private-key","permalink":"/viethungle/docs/tutorials/gpg4win-backup-restore-private-key","draft":false,"unlisted":false,"editUrl":"https://github.com/viethungle0503/viethungle/tree/main/docs/docs/tutorials/gpg4win-backup-restore-private-key.md","tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13},"sidebar":"tutorialSidebar","previous":{"title":"C\xe1c Database Open-Source Ph\u1ed5 Bi\u1ebfn: So s\xe1nh t\xednh n\u0103ng v\xe0 use case","permalink":"/viethungle/docs/tutorials/open-source-databases-comparison"},"next":{"title":"C\u1ea5u tr\xfac th\u01b0 m\u1ee5c Git v\xe0 c\xe1ch lo\u1ea1i b\u1ecf commit kh\xf4ng mong mu\u1ed1n","permalink":"/viethungle/docs/tutorials/git-structure-and-commit-removal"}}');var t=r(4848),s=r(8453);const a={sidebar_position:13},c="Backup v\xe0 Restore Private Key GPG tr\xean Windows v\u1edbi GPG4win",l={},o=[{value:"1. Hi\u1ec3u v\u1ec1 l\u1ed7i &quot;No secret key&quot;",id:"1-hi\u1ec3u-v\u1ec1-l\u1ed7i-no-secret-key",level:2},{value:"1.1 Tri\u1ec7u ch\u1ee9ng l\u1ed7i ph\u1ed5 bi\u1ebfn",id:"11-tri\u1ec7u-ch\u1ee9ng-l\u1ed7i-ph\u1ed5-bi\u1ebfn",level:3},{value:"1.2 Nguy\xean nh\xe2n g\xe2y l\u1ed7i",id:"12-nguy\xean-nh\xe2n-g\xe2y-l\u1ed7i",level:3},{value:"2. Ki\u1ec3m tra v\xe0 ch\u1ea9n \u0111o\xe1n",id:"2-ki\u1ec3m-tra-v\xe0-ch\u1ea9n-\u0111o\xe1n",level:2},{value:"2.1 Ki\u1ec3m tra keys hi\u1ec7n c\xf3",id:"21-ki\u1ec3m-tra-keys-hi\u1ec7n-c\xf3",level:3},{value:"2.2 Ki\u1ec3m tra Git configuration",id:"22-ki\u1ec3m-tra-git-configuration",level:3},{value:"2.3 Ki\u1ec3m tra trong Cleopatra",id:"23-ki\u1ec3m-tra-trong-cleopatra",level:3},{value:"3. V\u1ecb tr\xed l\u01b0u tr\u1eef Private Key tr\xean Windows",id:"3-v\u1ecb-tr\xed-l\u01b0u-tr\u1eef-private-key-tr\xean-windows",level:2},{value:"3.1 Th\u01b0 m\u1ee5c GPG home directory",id:"31-th\u01b0-m\u1ee5c-gpg-home-directory",level:3},{value:"3.2 C\u1ea5u tr\xfac files quan tr\u1ecdng",id:"32-c\u1ea5u-tr\xfac-files-quan-tr\u1ecdng",level:3},{value:"4. Export Private Key (Backup)",id:"4-export-private-key-backup",level:2},{value:"4.1 Export qua Cleopatra (GUI)",id:"41-export-qua-cleopatra-gui",level:3},{value:"4.2 Export qua Command Line",id:"42-export-qua-command-line",level:3},{value:"4.3 Backup to\xe0n b\u1ed9 GPG directory (t\xf9y ch\u1ecdn)",id:"43-backup-to\xe0n-b\u1ed9-gpg-directory-t\xf9y-ch\u1ecdn",level:3},{value:"5. Import Private Key (Restore)",id:"5-import-private-key-restore",level:2},{value:"5.1 Import qua Cleopatra",id:"51-import-qua-cleopatra",level:3},{value:"5.2 Import qua Command Line",id:"52-import-qua-command-line",level:3},{value:"5.3 Ki\u1ec3m tra sau import",id:"53-ki\u1ec3m-tra-sau-import",level:3},{value:"6. C\u1ea5u h\xecnh Git sau restore",id:"6-c\u1ea5u-h\xecnh-git-sau-restore",level:2},{value:"6.1 C\u1eadp nh\u1eadt Git configuration",id:"61-c\u1eadp-nh\u1eadt-git-configuration",level:3},{value:"6.2 Alternative GPG program paths",id:"62-alternative-gpg-program-paths",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"backup-v\xe0-restore-private-key-gpg-tr\xean-windows-v\u1edbi-gpg4win",children:"Backup v\xe0 Restore Private Key GPG tr\xean Windows v\u1edbi GPG4win"})}),"\n",(0,t.jsx)(n.p,{children:'Khi l\xe0m vi\u1ec7c v\u1edbi GPG key signing tr\xean Windows, vi\u1ec7c backup v\xe0 restore private key l\xe0 r\u1ea5t quan tr\u1ecdng \u0111\u1ec3 kh\xf4ng m\u1ea5t kh\u1ea3 n\u0103ng k\xfd commit ho\u1eb7c gi\u1ea3i m\xe3 d\u1eef li\u1ec7u. B\xe0i vi\u1ebft n\xe0y h\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1ch x\u1eed l\xfd l\u1ed7i "No secret key" v\xe0 backup/restore private key \u0111\xfang c\xe1ch.'}),"\n",(0,t.jsx)(n.h2,{id:"1-hi\u1ec3u-v\u1ec1-l\u1ed7i-no-secret-key",children:'1. Hi\u1ec3u v\u1ec1 l\u1ed7i "No secret key"'}),"\n",(0,t.jsx)(n.h3,{id:"11-tri\u1ec7u-ch\u1ee9ng-l\u1ed7i-ph\u1ed5-bi\u1ebfn",children:"1.1 Tri\u1ec7u ch\u1ee9ng l\u1ed7i ph\u1ed5 bi\u1ebfn"}),"\n",(0,t.jsx)(n.p,{children:"Khi th\u1ef1c hi\u1ec7n l\u1ec7nh Git commit v\u1edbi GPG signing:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'git commit --allow-empty -m "Test k\xfd GPG"\n'})}),"\n",(0,t.jsx)(n.p,{children:"B\u1ea1n c\xf3 th\u1ec3 g\u1eb7p l\u1ed7i:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'error: gpg failed to sign the data:\r\ngpg: skipped "4E238EC3489F5F71": No secret key\r\n[GNUPG:] INV_SGNR 9 4E238EC3489F5F71\r\n[GNUPG:] FAILURE sign 17\r\ngpg: signing failed: No secret key\r\nfatal: failed to write commit object\n'})}),"\n",(0,t.jsx)(n.h3,{id:"12-nguy\xean-nh\xe2n-g\xe2y-l\u1ed7i",children:"1.2 Nguy\xean nh\xe2n g\xe2y l\u1ed7i"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ch\u1ec9 c\xf3 public key"}),": \u0110\xe3 import public key nh\u01b0ng thi\u1ebfu private key"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Key kh\xf4ng kh\u1edbp"}),": Git config s\u1eed d\u1ee5ng key ID kh\xf4ng t\u1ed3n t\u1ea1i trong keyring"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GPG program sai"}),": Git \u0111ang s\u1eed d\u1ee5ng GPG version kh\xe1c v\u1edbi n\u01a1i l\u01b0u keys"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Key b\u1ecb h\u1ecfng"}),": Private key b\u1ecb corrupted ho\u1eb7c kh\xf4ng \u0111\u1ea7y \u0111\u1ee7"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"2-ki\u1ec3m-tra-v\xe0-ch\u1ea9n-\u0111o\xe1n",children:"2. Ki\u1ec3m tra v\xe0 ch\u1ea9n \u0111o\xe1n"}),"\n",(0,t.jsx)(n.h3,{id:"21-ki\u1ec3m-tra-keys-hi\u1ec7n-c\xf3",children:"2.1 Ki\u1ec3m tra keys hi\u1ec7n c\xf3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Li\u1ec7t k\xea public keys\r\ngpg --list-keys --keyid-format LONG\r\n\r\n# Li\u1ec7t k\xea private keys (secret keys)\r\ngpg --list-secret-keys --keyid-format LONG\n"})}),"\n",(0,t.jsx)(n.h3,{id:"22-ki\u1ec3m-tra-git-configuration",children:"2.2 Ki\u1ec3m tra Git configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Xem GPG program Git \u0111ang d\xf9ng\r\ngit config --global gpg.program\r\n\r\n# Xem signing key \u0111\u01b0\u1ee3c config\r\ngit config --global user.signingkey\r\n\r\n# Xem c\xf3 auto-sign kh\xf4ng\r\ngit config --global commit.gpgsign\n"})}),"\n",(0,t.jsx)(n.h3,{id:"23-ki\u1ec3m-tra-trong-cleopatra",children:"2.3 Ki\u1ec3m tra trong Cleopatra"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["M\u1edf ",(0,t.jsx)(n.strong,{children:"Cleopatra"})," (GPG4win)"]}),"\n",(0,t.jsxs)(n.li,{children:["V\xe0o tab ",(0,t.jsx)(n.strong,{children:'"My Certificates"'})]}),"\n",(0,t.jsxs)(n.li,{children:["T\xecm key c\u1ee7a b\u1ea1n v\xe0 ki\u1ec3m tra bi\u1ec3u t\u01b0\u1ee3ng:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\ud83d\udd11 ",(0,t.jsx)(n.strong,{children:"Ch\xeca kh\xf3a"}),": C\xf3 c\u1ea3 public + private key"]}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udd12 ",(0,t.jsx)(n.strong,{children:"\u1ed4 kh\xf3a"}),": Ch\u1ec9 c\xf3 public key"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"3-v\u1ecb-tr\xed-l\u01b0u-tr\u1eef-private-key-tr\xean-windows",children:"3. V\u1ecb tr\xed l\u01b0u tr\u1eef Private Key tr\xean Windows"}),"\n",(0,t.jsx)(n.h3,{id:"31-th\u01b0-m\u1ee5c-gpg-home-directory",children:"3.1 Th\u01b0 m\u1ee5c GPG home directory"}),"\n",(0,t.jsx)(n.p,{children:"GPG4win l\u01b0u private keys t\u1ea1i:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"%APPDATA%\\gnupg\\\n"})}),"\n",(0,t.jsx)(n.p,{children:"Th\u01b0\u1eddng l\xe0:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"C:\\Users\\[username]\\AppData\\Roaming\\gnupg\\\n"})}),"\n",(0,t.jsx)(n.h3,{id:"32-c\u1ea5u-tr\xfac-files-quan-tr\u1ecdng",children:"3.2 C\u1ea5u tr\xfac files quan tr\u1ecdng"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"File"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pubring.kbx"})}),(0,t.jsx)(n.td,{children:"Public keyring (GPG 2.1+)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"private-keys-v1.d\\"})}),(0,t.jsx)(n.td,{children:"Th\u01b0 m\u1ee5c ch\u1ee9a private keys"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"trustdb.gpg"})}),(0,t.jsx)(n.td,{children:"Trust database"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gpg.conf"})}),(0,t.jsx)(n.td,{children:"Configuration file"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u26a0\ufe0f L\u01b0u \xfd"}),": Kh\xf4ng n\xean copy tr\u1ef1c ti\u1ebfp c\xe1c files n\xe0y v\xec c\xf3 th\u1ec3 g\xe2y l\u1ed7i."]}),"\n",(0,t.jsx)(n.h2,{id:"4-export-private-key-backup",children:"4. Export Private Key (Backup)"}),"\n",(0,t.jsx)(n.h3,{id:"41-export-qua-cleopatra-gui",children:"4.1 Export qua Cleopatra (GUI)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["M\u1edf ",(0,t.jsx)(n.strong,{children:"Cleopatra"})]}),"\n",(0,t.jsx)(n.li,{children:"Right-click v\xe0o key c\u1ea7n backup"}),"\n",(0,t.jsxs)(n.li,{children:["Ch\u1ecdn ",(0,t.jsx)(n.strong,{children:'"Export Secret Keys..."'}),' (KH\xd4NG ch\u1ecdn "Export" th\u01b0\u1eddng)']}),"\n",(0,t.jsxs)(n.li,{children:["Ch\u1ecdn v\u1ecb tr\xed l\u01b0u v\xe0 \u0111\u1eb7t t\xean file (v\xed d\u1ee5: ",(0,t.jsx)(n.code,{children:"my-private-key.asc"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Nh\u1eadp passphrase \u0111\u1ec3 b\u1ea3o v\u1ec7 private key"}),"\n",(0,t.jsx)(n.li,{children:"L\u01b0u file backup"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"42-export-qua-command-line",children:"4.2 Export qua Command Line"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export private key v\u1edbi key ID c\u1ee5 th\u1ec3\r\ngpg --export-secret-keys 4E238EC3489F5F71 > private-key.asc\r\n\r\n# Export v\u1edbi ASCII armor (text format)\r\ngpg --armor --export-secret-keys 4E238EC3489F5F71 > private-key.asc\r\n\r\n# Export full backup (bao g\u1ed3m trust database)\r\ngpg --output backupkeys.pgp --armor --export-secret-keys --export-options export-backup user@example.com\n"})}),"\n",(0,t.jsx)(n.h3,{id:"43-backup-to\xe0n-b\u1ed9-gpg-directory-t\xf9y-ch\u1ecdn",children:"4.3 Backup to\xe0n b\u1ed9 GPG directory (t\xf9y ch\u1ecdn)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Copy to\xe0n b\u1ed9 th\u01b0 m\u1ee5c gnupg\r\nrobocopy "%APPDATA%\\gnupg" "D:\\Backup\\gnupg" /E /COPY:DAT\r\n\r\n# Ho\u1eb7c d\xf9ng PowerShell\r\nCopy-Item -Path "$env:APPDATA\\gnupg" -Destination "D:\\Backup\\gnupg" -Recurse\n'})}),"\n",(0,t.jsx)(n.h2,{id:"5-import-private-key-restore",children:"5. Import Private Key (Restore)"}),"\n",(0,t.jsx)(n.h3,{id:"51-import-qua-cleopatra",children:"5.1 Import qua Cleopatra"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["M\u1edf ",(0,t.jsx)(n.strong,{children:"Cleopatra"})]}),"\n",(0,t.jsxs)(n.li,{children:["Ch\u1ecdn ",(0,t.jsx)(n.strong,{children:"File \u2192 Import Certificates"})]}),"\n",(0,t.jsxs)(n.li,{children:["Ch\u1ecdn file private key \u0111\xe3 backup (",(0,t.jsx)(n.code,{children:".asc"}),", ",(0,t.jsx)(n.code,{children:".gpg"}),", ",(0,t.jsx)(n.code,{children:".pgp"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Nh\u1eadp passphrase n\u1ebfu \u0111\u01b0\u1ee3c y\xeau c\u1ea7u"}),"\n",(0,t.jsx)(n.li,{children:"\u0110\u1eb7t passphrase m\u1edbi \u0111\u1ec3 b\u1ea3o v\u1ec7 key sau import"}),"\n",(0,t.jsx)(n.li,{children:"X\xe1c nh\u1eadn import th\xe0nh c\xf4ng"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"52-import-qua-command-line",children:"5.2 Import qua Command Line"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Import private key\r\ngpg --import private-key.asc\r\n\r\n# Import v\u1edbi verbose output\r\ngpg --import --verbose private-key.asc\r\n\r\n# Import t\u1eeb backup file\r\ngpg --import backupkeys.pgp\n"})}),"\n",(0,t.jsx)(n.h3,{id:"53-ki\u1ec3m-tra-sau-import",children:"5.3 Ki\u1ec3m tra sau import"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Verify private key \u0111\xe3 \u0111\u01b0\u1ee3c import\r\ngpg --list-secret-keys --keyid-format LONG\r\n\r\n# Test k\xfd th\u1eed\r\necho "test message" | gpg --clearsign\n'})}),"\n",(0,t.jsx)(n.h2,{id:"6-c\u1ea5u-h\xecnh-git-sau-restore",children:"6. C\u1ea5u h\xecnh Git sau restore"}),"\n",(0,t.jsx)(n.h3,{id:"61-c\u1eadp-nh\u1eadt-git-configuration",children:"6.1 C\u1eadp nh\u1eadt Git configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Set signing key\r\ngit config --global user.signingkey 4E238EC3489F5F71\r\n\r\n# Enable auto-signing\r\ngit config --global commit.gpgsign true\r\n\r\n# C\u1ea5u h\xecnh GPG program\r\ngit config --global gpg.program "C:\\Program Files (x86)\\GnuPG\\bin\\gpg.exe"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"62-alternative-gpg-program-paths",children:"6.2 Alternative GPG program paths"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Cho Git for Windows bundled GPG\r\ngit config --global gpg.program "/c/Program Files/Git/usr/bin/gpg.exe"\r\n\r\n# Cho GPG4win installation\r\ngit config --global gpg.program "C:\\Program Files\\GnuPG\\bin\\gpg.exe"\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var i=r(6540);const t={},s=i.createContext(t);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);